## –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π SQL

## #1 –†–∞–±–æ—Ç–∞ —Å —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö

–ú—ã —É–∂–µ –Ω–µ —Ä–∞–∑ –∑–Ω–∞–∫–æ–º–∏–ª–∏—Å—å —Å —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –≤ SQL –∏ –Ω–∞–ø–∏—Å–∞–ª–∏ –Ω–µ –æ–¥–∏–Ω –¥–µ—Å—è—Ç–æ–∫ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —Ä–∞–∑–Ω–æ—Ç–∏–ø–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –ß–µ–º –æ–±—à–∏—Ä–Ω–µ–µ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –Ω–∞—à–∏ –∑–Ω–∞–Ω–∏—è, —Ç–µ–º –≤ –±–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç–µ–º—ã –º—ã –º–æ–∂–µ–º –ø–æ–≥—Ä—É–∂–∞—Ç—å—Å—è üê≥. –ï—Å–ª–∏ —Ä–∞–Ω—å—à–µ –Ω–∞—à–µ–π –∑–∞–¥–∞—á–µ–π –±—ã–ª–æ –±—ã—Å—Ç—Ä–æ –ø—Ä–æ–±–µ–∂–∞—Ç—å—Å—è –ø–æ –≤–µ—Ä—Ö–∞–º SQL, —á—Ç–æ–±—ã —Å–ª–æ–∂–∏—Ç—å –æ–±—â—É—é –∫–∞—Ä—Ç–∏–Ω—É –∏ –±—ã—Ç—å —Å–ø–æ—Å–æ–±–Ω—ã–º –Ω–∞–ø–∏—Å–∞—Ç—å –±–∞–∑–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã, —Ç–æ —Ç–µ–ø–µ—Ä—å –º—ã –±—É–¥–µ–º –ø—ã—Ç–∞—Ç—å—Å—è –æ—Ö–≤–∞—Ç–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª –±–æ–ª–µ–µ –ø–æ–ª–Ω–æ.
–í —Ä–∞–º–∫–∞—Ö –±–ª–∏–∂–∞–π—à–∏—Ö –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É—Ä–æ–∫–æ–≤ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∫–æ—Ç–æ—Ä—ã–º–∏ —á–∞—Å—Ç–æ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã –∏ –æ—à–∏–±–∫–∏. –ê —Å –ø–æ–º–æ—â—å—é –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞–Ω–∏–π —Å—Ä–∞–∑—É –∂–µ –æ—Ç—Ä–∞–±–æ—Ç–∞–µ–º –Ω–∞–∏–±–æ–ª–µ–µ —Ç—Ä—É–¥–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã, —á—Ç–æ–±—ã –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º –æ–Ω–∏ –Ω–µ –≤—ã–∑—ã–≤–∞–ª–∏ –ø—Ä–æ–±–ª–µ–º –ø—Ä–∏ —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤.

### #1.1 –ß–∏—Å–ª–æ–≤–æ–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –≤ SQL

–°–æ–∑–¥–∞–Ω–∏–µ —á–∏—Å–ª–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ SQL –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ–µ: –º–æ–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ —á–∏—Å–ª–æ –∫–∞–∫ –ª–∏—Ç–µ—Ä–∞–ª, –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –µ–≥–æ –∏–∑ —Å—Ç–æ–ª–±—Ü–∞ —Ç–∞–±–ª–∏—Ü—ã –∏–ª–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –ø—É—Ç—ë–º –≤—ã—á–∏—Å–ª–µ–Ω–∏–π.
–ü—Ä–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (+, -, *, / –∏ –ø—Ä–æ—á–∏–µ) –∏ –∏–∑–º–µ–Ω—è—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –≤—ã—á–∏—Å–ª–µ–Ω–∏–π —Å –ø–æ–º–æ—â—å—é —Å–∫–æ–±–æ–∫.

    SELECT 2 * ((22 - 16) / (2 + 1)) AS calc_example;
    
    calc_example
    4

**–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏**

–î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π, —Ç–∞–∫–∏—Ö –∫–∞–∫ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–µ–ø–µ–Ω–∏ —á–∏—Å–ª–∞ –∏–ª–∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–≥–æ –∫–æ—Ä–Ω—è, –≤ SQL –µ—Å—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —á–∏—Å–ª–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏. –í–æ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:

| –ò–º—è —Ñ—É–Ω–∫—Ü–∏–∏ | –û–ø–∏—Å–∞–Ω–∏–µ |
| ------------- | ------------- |
| POW(num, power) | –í—ã—á–∏—Å–ª—è–µ—Ç —á–∏—Å–ª–æ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π —Å—Ç–µ–ø–µ–Ω–∏|
| SQRT(num) | –í—ã—á–∏—Å–ª—è–µ—Ç –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–π –∫–æ—Ä–µ–Ω—å —á–∏—Å–ª–∞ |
| LOG(base, num) | –í—ã—á–∏—Å–ª—è–µ—Ç –ª–æ–≥–∞—Ä–∏—Ñ–º —á–∏—Å–ª–∞ –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –æ—Å–Ω–æ–≤–∞–Ω–∏—é |
| EXP(num) | –í—ã—á–∏—Å–ª—è–µ—Ç enum |
| SIN(num) | –í—ã—á–∏—Å–ª—è–µ—Ç —Å–∏–Ω—É—Å —á–∏—Å–ª–∞ |
| COS(num) | –í—ã—á–∏—Å–ª—è–µ—Ç –∫–æ—Å–∏–Ω—É—Å —á–∏—Å–ª–∞ |
| TAN(num) | –í—ã—á–∏—Å–ª—è–µ—Ç —Ç–∞–Ω–≥–µ–Ω—Å —á–∏—Å–ª–∞ |

–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —á–∏—Å–ª–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, –∏—Ö –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –ø—Ä–∏–º–µ—Ä—ã –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ.

**–û–∫—Ä—É–≥–ª–µ–Ω–∏–µ —á–∏—Å–µ–ª**

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —á–∏—Å–ª–∞–º–∏ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π –Ω–µ –≤—Å–µ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–ª–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —á–∏—Å–µ–ª —Å –ø–æ–ª–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é. –¢–∞–∫, –¥–µ–Ω–µ–∂–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ 6 –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π, –∞ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –¥–æ 2, —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ –∫–æ–ø–µ–µ–∫.

–î–ª—è –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è —á–∏—Å–ª–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ SQL –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ 4 —Ñ—É–Ω–∫—Ü–∏–∏: *CEIL, FLOOR, ROUND, TRUNCATE*.

–§—É–Ω–∫—Ü–∏–∏ *CEIL, FLOOR* –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ —Ç–æ, —á—Ç–æ–±—ã –æ–∫—Ä—É–≥–ª—è—Ç—å —á–∏—Å–ª–æ –∫ –±–ª–∏–∂–∞–π—à–µ–º—É —Ü–µ–ª–æ–º—É —á–∏—Å–ª—É –≤ –±–æ–ª—å—à—É—é –∏ –≤ –º–µ–Ω—å—à—É—é —Å—Ç–æ—Ä–æ–Ω—É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ.

    SELECT CEILING(69.69) AS ceiling, FLOOR(69.69) AS floor;
    
| ceiling | floor |
| ------------- | ------------- |
| 70 | 69 |

–î–ª—è –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –∫ –±–ª–∏–∂–∞–π—à–µ–º—É —Ü–µ–ª–æ–º—É —á–∏—Å–ª—É –µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏—è *ROUND*, –∫–æ—Ç–æ—Ä–∞—è –ª—é–±–æ–µ —á–∏—Å–ª–æ, –¥–µ—Å—è—Ç–∏—á–Ω–∞—è —á–∞—Å—Ç—å –∫–æ—Ç–æ—Ä–æ–≥–æ –±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–∞ 0.5, –æ–∫—Ä—É–≥–ª—è–µ—Ç –≤ –±–æ–ª—å—à—É—é —Å—Ç–æ—Ä–æ–Ω—É, –∏–Ω–∞—á–µ –≤ –º–µ–Ω—å—à—É—é.

    SELECT ROUND(69.499), ROUND(69.5), ROUND(69.501);

| ROUND(69.499) | ROUND(69.5) | ROUND(69.501) |
| ------------- | ------------- | ------------- |
| 69 | 70 | 70 |

–§—É–Ω–∫—Ü–∏—è *ROUND* —Ç–∞–∫–∂–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–∫—Ä—É–≥–ª—è—Ç—å —á–∏—Å–ª–æ –¥–æ –Ω–µ–∫–æ—Ç–æ—Ä–æ–π —á–∞—Å—Ç–∏ –¥–µ—Å—è—Ç–∏—á–Ω—ã—Ö –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π. –î–ª—è —ç—Ç–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤—Ç–æ—Ä–æ–π –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π, –∫–æ—Ç–æ—Ä—ã–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—Å—Ç–∞–≤–∏—Ç—å.

    SELECT ROUND(69.7171,1), ROUND(69.7171,2), ROUND(69.7171,3);

| ROUND(69.7171,1) | ROUND(69.7171,2) | ROUND(69.7171,3) |
| ------------- | ------------- | ------------- |
| 69.7 | 69.72 | 69.717 |

–í—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç —Ñ—É–Ω–∫—Ü–∏–∏ *ROUND* –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ç–∞–∫–∂–µ –∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ, —Ü–∏—Ñ—Ä—ã —Å–ª–µ–≤–∞ –æ—Ç –¥–µ—Å—è—Ç–∏—á–Ω–æ–π —Ç–æ—á–∫–∏ —á–∏—Å–ª–∞ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —Ä–∞–≤–Ω—ã–º–∏ –Ω—É–ª—é –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤ –∞—Ä–≥—É–º–µ–Ω—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, –∞ –¥—Ä–æ–±–Ω–∞—è —á–∞—Å—Ç—å –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è.

    SELECT ROUND(1691.7,-1), ROUND(1691.7,-2), ROUND(1691.7,-3);

| ROUND(1691.7,-1) | ROUND(1691.7,-2) | ROUND(1691.7,-3) |
| ------------- | ------------- | ------------- |
| 1690 | 1700 | 2000 |

–§—É–Ω–∫—Ü–∏—è *TRUNCATE* –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏ *ROUND*, –æ–Ω–∞ —Ç–∞–∫–∂–µ —Å–ø–æ—Å–æ–±–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞—Ç—å 2-–π –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä, —Ç–æ–ª—å–∫–æ –≤–º–µ—Å—Ç–æ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –æ–Ω–∞ –ø—Ä–æ—Å—Ç–æ –æ—Ç–±—Ä–∞—Å—ã–≤–∞–µ—Ç –Ω–µ–Ω—É–∂–Ω—ã–µ —Ü–∏—Ñ—Ä—ã.

    SELECT TRUNCATE(69.7979,1), TRUNCATE(69.7979,2), TRUNCATE(69.7979,3);

| TRUNCATE(69.7979,1) | TRUNCATE(69.7979,2) | TRUNCATE(69.7979,3) |
| ------------- | ------------- | ------------- |
| 69.7 | 69.79 | 69.797 |

**–†–∞–±–æ—Ç–∞ —Å–æ –∑–Ω–∞–∫–æ–≤—ã–º–∏ —á–∏—Å–ª–∞–º–∏**

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —á–∏—Å–ª–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ –Ω–∞–ª–∏—á–∏–µ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π, –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏–∏ *SIGN* –∏ *ABS*.
–§—É–Ω–∫—Ü–∏—è *SIGN* –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ -1, –µ—Å–ª–∏ —á–∏—Å–ª–æ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ, 0, –µ—Å–ª–∏ —á–∏—Å–ª–æ –Ω—É–ª–µ–≤–æ–µ –∏ 1, –µ—Å–ª–∏ —á–∏—Å–ª–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ.

    SELECT SIGN(-69), SIGN(0), SIGN(69);

| SIGN(-69) | SIGN(0) | SIGN(69) |
| ------------- | ------------- | ------------- |
| -1 | 0 | 1 |

–§—É–Ω–∫—Ü–∏—è *ABS* –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–±—Å–æ–ª—é—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —á–∏—Å–ª–∞.

    SELECT ABS(-69), ABS(0), ABS(69);

| ABS(-69) | ABS(0) | ABS(69) |
| ------------- | ------------- | ------------- |
| 69 | 0 | 69 |

### #1.2 –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –≤ SQL

–ò–∑ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö –≤ SQL –≤—Ä–µ–º–µ–Ω–Ω—ãÃÅ–µ –¥–∞–Ω–Ω—ã–µ —è–≤–ª—è—é—Ç—Å—è –Ω–∞–∏–±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–º–∏ ü§Ø. –°–ª–æ–∂–Ω–æ—Å—Ç—å –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø—Ä–∏—á–∏–Ω–∞–º, –∏ –≤–æ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ –Ω–∏—Ö:
* –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–ø–æ—Å–æ–±–æ–≤ –∑–∞–¥–∞–Ω–∏—è –¥–∞—Ç—ã –∏ –≤—Ä–µ–º–µ–Ω–∏
* –Ω–∞–ª–∏—á–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–æ–Ω
* –Ω–µ–æ—á–µ–≤–∏–¥–Ω–æ—Å—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä, —Å–ª–æ–∂–Ω–æ—Å—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤–æ–∑—Ä–∞—Å—Ç–∞.

**–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**

–í—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –æ–¥–Ω–∏–º –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–ø–æ—Å–æ–±–æ–≤:
* —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Å—Ç–æ–ª–±—Ü–∞ —Å –≤—Ä–µ–º√©–Ω–Ω—ã–º —Ç–∏–ø–æ–º –¥–∞–Ω–Ω—ã—Ö
* –∑–∞–¥–∞—Ç—å –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è —á–µ—Ä–µ–∑ —Å—Ç—Ä–æ–∫–æ–≤–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—É—á–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ãÃÅ–µ –¥–∞–Ω–Ω—ã–µ –ø—É—Ç—ë–º –≤—ã–∑–æ–≤–∞ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏—Ö –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö

**–°—Ç—Ä–æ–∫–æ–≤–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**

–î–ª—è –∑–∞–¥–∞–Ω–∏—è –¥–∞—Ç—ã –∏ –≤—Ä–µ–º–µ–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã:

| –¢–∏–ø | –§–æ—Ä–º–∞—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
| ------------- | ------------- |
| DATE | YYYY-MM-DD |
| DATETIME | YYYY-MM-DD hh:mm:ss |
| TIMESTAMP | YYYY-MM-DD hh:mm:ss |
| TIME | hhh:mm:sss| 
| YEAR | YYYY - –ø–æ–ª–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç |

*YY* –∏–ª–∏ *Y* - —Å–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ–¥ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö 2000-2069 –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π 0-69 –∏ –≥–æ–¥ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö 1970-1999 –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π 70-99
–ü—Ä–∏—á—ë–º, –ø—Ä–∏ —É–∫–∞–∑–∞–Ω–∏–∏ –¥–∞—Ç—ã –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±–æ–π –∑–Ω–∞–∫ –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ –º–µ–∂–¥—É —á–∞—Å—Ç—è–º–∏ —Ä–∞–∑–¥–µ–ª–æ–≤ –¥–∞—Ç—ã –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–∏. –¢–∞–∫–∂–µ –≤–æ–∑–º–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –¥–∞—Ç—É –≤–æ–æ–±—â–µ –±–µ–∑ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∑–Ω–∞–∫–∞, —Å–ª–∏—Ç–Ω–æ.

–ü—Ä–∏–º–µ—Ä—ã –≤–∞–ª–∏–¥–Ω–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π —á–µ—Ä–µ–∑ —Å—Ç—Ä–æ–∫–æ–≤–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ:

    SELECT  CAST("2022-06-16 16:37:23" AS DATETIME) AS datetime_1,
            CAST("2014/02/22 16*37*22" AS DATETIME) AS datetime_2,
            CAST("20220616163723" AS DATETIME) AS datetime_3,
            CAST("2021-02-12" AS DATE) AS date_1,
            CAST("160:23:13" AS TIME) AS time_1,
            CAST("89" AS YEAR) AS year

| datetime_1 | datetime_2 | datetime_3 | date_1 | time_1 | year |
| ------------- | ------------- | ------------- | ------------- | ------------- | ------------- |
| 2022-06-16T16:37:23.000Z | 2014-02-22T16:37:22.000Z | 2022-06-16T16:37:23.000Z | 2021-02-12T00:00:00.000Z | 160:23:13 | 1989 |

–í –∑–∞–ø—Ä–æ—Å–µ –≤—ã—à–µ –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–æ–∫–∏ –≤ –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è –±—ã–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è *CAST*. –û–Ω–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞, –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ –æ–∂–∏–¥–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–µ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Å—Ç—Ä–æ–∫—É –∫ –Ω—É–∂–Ω–æ–º—É —Ç–∏–ø—É. –° –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ–º —Ç–∏–ø–æ–≤ –º—ã –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ –ø–æ–∑–Ω–∞–∫–æ–º–∏–º—Å—è –≤ —Å—Ç–∞—Ç—å–µ ¬´–§—É–Ω–∫—Ü–∏–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ç–∏–ø–æ–≤, CAST¬ª.

**–§—É–Ω–∫—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞—Ç**

–ï—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–ª—É—á–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å—Ç—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –Ω–∏ –æ–¥–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è *CAST*, —Ç–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é *STR_TO_DATE*, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—É—é —Å—Ç—Ä–æ–∫—É, —Å–æ–¥–µ—Ä–∂–∞—â—É—é –¥–∞—Ç—É, –∏ —Ñ–æ—Ä–º–∞—Ç, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π –µ—ë.

    SELECT STR_TO_DATE('November 13, 1998', '%M %d, %Y') AS date;
    
    date
    1998-11-13T00:00:00.000Z

–ë–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ *STR_TO_DATE* –∏ –µ—ë –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ.

–î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∂–µ —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–∏ –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –µ—ë –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤ –¥–∞—Ç—É, –ø–æ—Ç–æ–º—É —á—Ç–æ –µ—Å—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π: *CURDATE, CURTIME –∏ NOW*.

    SELECT CURDATE(), CURTIME(), NOW();

**–§—É–Ω–∫—Ü–∏–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**

–ò–Ω–æ–≥–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–ª—É—á–∏—Ç—å –Ω–µ –≤—Å—é –¥–∞—Ç—É, –∞ —Ç–æ–ª—å–∫–æ –µ—ë –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —á–∞—Å—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, –º–µ—Å—è—Ü –∏–ª–∏ –≥–æ–¥.
–î–ª—è —ç—Ç–æ–≥–æ –≤ SQL –µ—Å—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
| ------------- | ------------- |
| YEAR | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ–¥ –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∞—Ç—ã |
| MONTH | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º–µ—Å—è—Ü–∞ –≥–æ–¥–∞ (–æ—Ç 1 –¥–æ 12) –¥–∞—Ç—ã |
| DAY | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä –¥–Ω—è –≤ –º–µ—Å—è—Ü–µ (–æ—Ç 1 –¥–æ 31) |
| HOUR | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —á–∞—Å–∞ (–æ—Ç 0 –¥–æ 23) –¥–ª—è –≤—Ä–µ–º–µ–Ω–∏ |
| MINUTE | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –º–∏–Ω—É—Ç (–æ—Ç 0 –¥–æ 59) –¥–ª—è –≤—Ä–µ–º–µ–Ω–∏ |

**–û—Ç–ª–∏—á–∏–µ DATETIME –æ—Ç TIMESTAMP**

–í MySQL –µ—Å—Ç—å –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–∏–µ –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö: *DATETIME –∏ TIMESTAMP*. –û–Ω–∏ –æ–±–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞—Ç—ã –∏ –≤—Ä–µ–º–µ–Ω–∏, –Ω–æ –∏–º–µ—é—Ç —Ä—è–¥ –æ—Ç–ª–∏—á–∏–π, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏—Ö –∏—Ö —Ü–µ–ª–µ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ.

<table>
    <tr>
        <td>–ö—Ä–∏—Ç–µ—Ä–∏–π</td>
        <td>DATETIME</td>
        <td>TIMESTAMP</td>
    </tr>
    <tr>
        <td>–î–∏–∞–ø–∞–∑–æ–Ω</td>
        <td>
        –æ—Ç 1000-01-01  00:00:00<br>
        –¥–æ 9999-12-31 23:59:59<br>
        </td>
        <td>
        –æ—Ç 1970-01-01 00:00:00<br>
        –¥–æ 2038-01-19 03:14:07<br>
        </td>
    </tr>
    <tr>
        <td>–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å</td>
        <td>
        –ù–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è<br>
        –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Ç–∞–∫–æ–º –≤–∏–¥–µ, –≤ –∫–æ—Ç–æ—Ä–æ–º –¥–∞—Ç–∞ –±—ã–ª–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞<br>
        </td>
        <td>
        –£—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è<br>
        –ü—Ä–∏ –≤—ã–±–æ—Ä–∫–∞—Ö –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å —É—á—ë—Ç–æ–º —Ç–µ–∫—É—â–µ–≥–æ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ë–î<br>
        </td>
    </tr>
</table>

**–ß–∞—Å–æ–≤—ã–µ –ø–æ—è—Å–∞**

–¢–∞–∫ –∫–∞–∫ –ª—é–¥–∏ –≤–æ –≤—Å–µ–º –º–∏—Ä–µ —Ö–æ—Ç—è—Ç, —á—Ç–æ–±—ã –ø–æ–ª–¥–µ–Ω—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º—É –ø–æ–¥—ä—ë–º—É –°–æ–ª–Ω—Ü–∞, —Ç–æ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±—ã–ª–æ –∑–∞–¥–∞—á–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –∏ –º–∏—Ä –±—ã–ª —Ä–∞–∑–¥–µ–ª—ë–Ω –Ω–∞ 24 —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–∞.

–í –∫–∞—á–µ—Å—Ç–≤–µ —Ç–æ—á–∫–∏ –æ—Ç—Å—á—ë—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è *UTC (Coordinated Universal Time)*. –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —á–∞—Å–æ–≤—ã–µ –ø–æ—è—Å–∞ –º–æ–∂–Ω–æ –æ–ø–∏—Å–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —á–∞—Å–æ–≤ —Å–¥–≤–∏–≥–∞ –æ—Ç UTC. –î–ª—è –ø—Ä–∏–º–µ—Ä–∞, —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å –ú–æ—Å–∫–≤—ã –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø–∏—Å–∞–Ω –∫–∞–∫ UTC+3.

–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å —è–≤–ª—è–µ—Ç—Å—è –æ–¥–Ω–æ–π –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–µ—Ä–≤–µ—Ä–∞ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –∏ –º–æ–∂–µ—Ç –∑–∞–¥–∞–≤–∞—Ç—å—Å—è:
* –≥–ª–æ–±–∞–ª—å–Ω–æ
* –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
* –¥–ª—è —Ç–µ–∫—É—â–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —Å–µ—Å—Å–∏–∏

    SET GLOBAL time_zone = '+03:00';    // –≥–ª–æ–±–∞–ª—å–Ω–æ
    SET time_zone = '+03:00';           // –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    SET @@session.time_zone = '+03:00'; // –¥–ª—è —Ç–µ–∫—É—â–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —Å–µ—Å—Å–∏–∏

–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∑–æ–Ω—ã –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å —Ç–∏–ø–æ–º *TIMESTAMP* –±—É–¥—É—Ç –≤—ã–≤–æ–¥–∏—Ç—å—Å—è —Å —É—á—ë—Ç–æ–º —Ç–µ–∫—É—â–µ–π –∞–∫—Ç–∏–≤–Ω–æ–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∑–æ–Ω—ã.

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–¥–∞—á –Ω–∞ –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è**

–•–æ—á–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –Ω–∞ –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º —Ç–∏–ø–æ–º –¥–∞–Ω–Ω—ã—Ö, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö —á–∞—Å—Ç–æ —Å–æ–≤–µ—Ä—à–∞—é—Ç—Å—è –æ—à–∏–±–∫–∏.

*–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–æ–∑—Ä–∞—Å—Ç–∞*

–ü—Ä–∏ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–µ –∑–∞–¥–∞—á–∏ –Ω–∞–π—Ç–∏ –≤–æ–∑—Ä–∞—Å—Ç —á–µ–ª–æ–≤–µ–∫–∞ –ø–æ –¥–∞—Ç–µ –µ–≥–æ —Ä–æ–∂–¥–µ–Ω–∏—è —á–∞—Å—Ç–æ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç —Å–æ–±–ª–∞–∑–Ω üòà –≤—ã—á–∏—Å–ª–∏—Ç—å —Ä–∞–∑–Ω–∏—Ü—É —Ç–µ–∫—É—â–µ–≥–æ –≥–æ–¥–∞ –∏ –≥–æ–¥–∞ —Ä–æ–∂–¥–µ–Ω–∏—è —á–µ–ª–æ–≤–µ–∫–∞:

    SELECT YEAR(NOW()) - YEAR('2003-07-03 14:10:26');

–ü—Ä–æ–±–ª–µ–º–∞ —Ç–∞–∫–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –≤ —Ç–æ–º, —á—Ç–æ –æ–Ω –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç –±—ã–ª –ª–∏ –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è —É –¥–∞–Ω–Ω–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ –≤ —ç—Ç–æ–º –≥–æ–¥—É –∏–ª–∏ –µ—â—ë –Ω–µ—Ç. –¢–æ –µ—Å—Ç—å, –µ—Å–ª–∏ –Ω–∞ –º–æ–º–µ–Ω—Ç –∑–∞–ø—Ä–æ—Å–∞ —É–∂–µ –Ω–∞—Å—Ç—É–ø–∏–ª–æ 3-–µ –∏—é–ª—è (07-03), —Ç–æ —á–µ–ª–æ–≤–µ–∫ –æ—Ç–ø—Ä–∞–∑–¥–Ω–æ–≤–∞–ª —Å–≤–æ–π –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è –∏ –µ–º—É —É–∂–µ 20 –ª–µ—Ç, –∏–Ω–∞—á–µ –µ–º—É –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É 19 –≥–æ–¥–∞. –†–∞–∑–Ω–∏—Ü–∞ —Ñ—É–Ω–∫—Ü–∏–π YEAR —Ç—É—Ç –±—É–¥–µ—Ç –±–µ—Å–ø–æ–ª–µ–∑–Ω–∞ ‚Äî –≤ –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö –æ–Ω–∞ –¥–∞—Å—Ç 20 –ª–µ—Ç.

–ï—Å–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤–æ–∑—Ä–∞—Å—Ç —á–µ—Ä–µ–∑ —Ä–∞–∑–Ω–∏—Ü—É –≥–æ–¥–æ–≤ ‚Äî –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–π –≤–∞—Ä–∏–∞–Ω—Ç, —Ç–æ –º–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –∂–µ–ª–∞–Ω–∏–µ –Ω–∞–π—Ç–∏ –≤–æ–∑—Ä–∞—Å—Ç —á–µ—Ä–µ–∑ —Ä–∞–∑–Ω–∏—Ü—É –¥–Ω–µ–π –º–µ–∂–¥—É –¥–≤—É–º—è –¥–∞—Ç–∞–º–∏, –∑–∞—Ç–µ–º –ø–æ–¥–µ–ª–∏—Ç—å —ç—Ç—É —Ä–∞–∑–Ω–∏—Ü—É –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –≤ –≥–æ–¥—É –∏ –æ–∫—Ä—É–≥–ª–∏—Ç—å –≤–Ω–∏–∑:

    SELECT FLOOR(DATEDIFF(NOW(), '2003-07-03 14:10:26') / 365);

–ò —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –±—É–¥–µ—Ç –≥–æ—Ä–∞–∑–¥–æ —Ç–æ—á–Ω–µ–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ. –ù–æ –æ–Ω–æ –Ω–µ –±—É–¥–µ—Ç –∞–±—Å–æ–ª—é—Ç–Ω–æ —Ç–æ—á–Ω—ã–º –∏–∑-–∑–∞ –Ω–∞–ª–∏—á–∏—è –≤–∏—Å–æ–∫–æ—Å–Ω—ã—Ö –≥–æ–¥–æ–≤, –∫–æ–≥–¥–∞ –≤ –≥–æ–¥—É 366 –¥–Ω–µ–π. –•–æ—Ç—è –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å –≤ –≤—ã—á–∏—Å–ª–µ–Ω–∏–∏ –≤–æ–∑—Ä–∞—Å—Ç–∞ –¥–ª—è 1 —á–µ–ª–æ–≤–µ–∫–∞ –∏–∑-–∑–∞ –Ω–∞–ª–∏—á–∏—è –≤–∏—Å–æ–∫–æ—Å–Ω–æ–≥–æ –≥–æ–¥–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –Ω–∏–∑–∫–∞—è, –≤ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è—Ö –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ, —Å–∫–∞–∂–µ–º, —Å—Ä–µ–¥–Ω–µ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞ —Å—Ä–µ–¥–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –ª—é–¥–µ–π, –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å –º–æ–∂–µ—Ç –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å—Å—è –∏ –∏—Å–∫–∞–∑–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.

–ò –∫–∞–∫ –∂–µ —Ç–æ–≥–¥–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –≤–æ–∑—Ä–∞—Å—Ç? –î–ª—è —ç—Ç–æ–≥–æ –µ—Å—Ç—å –≥–æ—Ç–æ–≤–∞—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è ‚Äî *TIMESTAMPDIFF*, –∫–æ—Ç–æ—Ä–∞—è –ø–µ—Ä–≤—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –µ–¥–∏–Ω–∏—Ü—É –∏–∑–º–µ—Ä–µ–Ω–∏—è, –≤ –∫–æ—Ç–æ—Ä–æ–π –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É –¥–≤—É–º—è –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.

    SELECT TIMESTAMPDIFF(YEAR, '2003-07-03 14:10:26', NOW());

## #2 –§—É–Ω–∫—Ü–∏–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ç–∏–ø–æ–≤, CAST

–ö–æ–≥–¥–∞ –º—ã –≤—ã–ø–æ–ª–Ω—è–µ–º –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö, –°–£–ë–î –ø—ã—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–∏–≤–µ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∫ –Ω—É–∂–Ω–æ–º—É —Ç–∏–ø—É. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ –ø—Ä–∏–º–µ—Ä–µ –Ω–∏–∂–µ –º—ã —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è —Å —Ç–∏–ø–∞–º–∏ STRING –∏ INT. –ß—Ç–æ–±—ã –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ MySQL –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç —Å—Ç—Ä–æ–∫–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —á–∏—Å–ª–æ–≤–æ–µ.

    SELECT '50' > 49, '50' > 51;

    '50' > 49   |   '50' > 51
    1           |    0

–ù–æ –Ω–µ –≤—Å–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –°–£–ë–î –º–æ–∂–µ—Ç —Å–¥–µ–ª–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –∏ —Ç–æ–≥–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–µ–ª–∞—Ç—å —è–≤–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤. –î–ª—è —ç—Ç–æ–≥–æ –≤ MySQL –µ—Å—Ç—å –¥–≤–µ –æ—á–µ–Ω—å —Å—Ö–æ–∂–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ CAST –∏ CONVERT.

–°–∏–Ω—Ç–∞–∫—Å–∏—Å

    CAST(–∑–Ω–∞—á–µ–Ω–∏–µ AS —Ç–∏–ø_–¥–ª—è_–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏);
    CONVERT(–∑–Ω–∞—á–µ–Ω–∏–µ, —Ç–∏–ø_–¥–ª—è_–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏);

    SELECT CAST(12005.6 AS DECIMAL), CONVERT(12005.4, DECIMAL);

    CAST(12005.6 AS DECIMAL)    |    CONVERT(12005.4, DECIMAL)
    12006                       |	12005

–§—É–Ω–∫—Ü–∏—è CAST —É–º–µ–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –ª—é–±–æ–π –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö —Ç–∏–ø–æ–≤:

<table>
    <tr>
        <td>–¢–∏–ø</td>
        <td>–û–ø–∏—Å–∞–Ω–∏–µ</td>
    </tr>
    <tr>
        <td>DATE</td>
        <td>
        –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤ DATE<br>
        –§–æ—Ä–º–∞—Ç: "YYYY-MM-DD"<br>
        </td>        
    </tr>
    <tr>
        <td>DATETIME</td>
        <td>
        –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤ DATETIME<br>
        –§–æ—Ä–º–∞—Ç: "YYYY-MM-DD hh:mm:ss"<br>
        </td>
    </tr>
        <tr>
        <td>TIME</td>
        <td>
        –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤ TIME<br>
        –§–æ—Ä–º–∞—Ç: "hh:mm:ss"<br>
        </td>   
    <tr>
        <td>DECIMAL[(M[,D])]</td>
        <td>
        –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤ DECIMAL.
        –ò–º–µ–µ—Ç –¥–≤–∞ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–∞ M –∏ D,<br>
        –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏—Ö –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–Ω–∞–∫–æ–≤ –¥–æ –∏ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ.<br>
        –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é, D —Ä–∞–≤–µ–Ω 0, –∞ M —Ä–∞–≤–µ–Ω 10.<br>
        </td>
    </tr>
    <tr>
        <td>CHAR[(N)]</td>
        <td>
        –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤ CHAR. 
        –í –∫–∞—á–µ—Å—Ç–≤–µ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –¥–ª–∏–Ω—É —Å—Ç—Ä–æ–∫–∏<br>
        </td>
    </tr>
        <tr>
        <td>SIGNED</td>
        <td>
        –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∑–Ω–∞—á–µ–Ω–∏–µ BIGINT
        </td>
    </tr>
    <tr>
        <td>UNSIGNED</td>
        <td>
        –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –±–µ–∑–∑–Ω–∞–∫–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ BIGINT
        </td>
    </tr>
    <tr>
        <td>BINARY</td>
        <td>
        –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤ BINARY
        </td>
    </tr>
    <tr>
        <td>YEAR</td>
        <td>
        –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –≥–æ–¥
        </td>
    </tr>
</table>

**–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ª—é–±–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏**

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ CAST –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ñ–æ—Ä–º–∞—Ç—É –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è. –ò —Å—Ä–∞–∑—É –∂–µ –Ω–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è –≤–æ–ø—Ä–æ—Å, —á—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç, –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –Ω–µ –±—É–¥–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–º—É? –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–ª—É—á–∞–π–Ω—ã–π —Ç–µ–∫—Å—Ç –≤–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö:

    SELECT CAST('SQL Academy' AS DATETIME);

    CAST('SQL Academy' AS DATETIME)
    <NULL>

–í —ç—Ç–æ–º  —Å–ª—É—á–∞–µ MySQL –≤–µ—Ä–Ω—ë—Ç NULL –≤–º–µ—Å—Ç–æ —Å–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è.

## #3 –û–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ SQL

–û–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ ‚Äî –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —è–∑—ã–∫–∞ SQL, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –ø—Ä–æ–≤–æ–¥–∏—Ç—å —Å–ª–æ–∂–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø–æ –≥—Ä—É–ø–ø–∞–º —Å—Ç—Ä–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ —Å–≤—è–∑–∞–Ω—ã —Å —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–æ–∫–æ–π.

**–ü—Ä–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã**

–í–æ–∑–º–æ–∂–Ω–æ, –≤—ã –∑–∞–¥–∞–¥–∏—Ç–µ—Å—å –≤–æ–ø—Ä–æ—Å–æ–º: ¬´–ß—Ç–æ –∑–Ω–∞—á–∏—Ç –æ–∫–æ–Ω–Ω—ã–µ?¬ª.

–í —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º SQL-–∑–∞–ø—Ä–æ—Å–µ –≤—Å–µ –Ω–∞–±–æ—Ä—ã —Å—Ç—Ä–æ–∫ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—é—Ç—Å—è –∫–∞–∫ –æ–¥–∏–Ω —Å–ø–ª–æ—à–Ω–æ–π –±–ª–æ–∫ –¥–∞–Ω–Ω—ã—Ö, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –∏ –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è –∞–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.
–û–¥–Ω–∞–∫–æ, –∫–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –æ–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∑–∞–ø—Ä–æ—Å —Å–µ–≥–º–µ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –≥—Ä—É–ø–ø—ã —Å—Ç—Ä–æ–∫ (–∏–ª–∏ ¬´–æ–∫–Ω–∞¬ª), –∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∞–∫–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞ –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –∞–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.

–≠—Ç–æ –æ–∫–Ω–æ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–¥–∞—ë—Ç—Å—è –≤ –æ–∫–æ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é, –º–æ–∂–µ—Ç –±—ã—Ç—å:
‚Ä¢	–≤—Å–µ–π —Ç–∞–±–ª–∏—Ü–µ–π
‚Ä¢	–æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ –ø–∞—Ä—Ç–∏—Ü–∏—è–º–∏ —Ç–∞–±–ª–∏—Ü—ã, —Ç–æ –µ—Å—Ç—å –≥—Ä—É–ø–ø–æ–π —Å—Ç—Ä–æ–∫ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–¥–Ω–æ–≥–æ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª–µ–π
‚Ä¢	–∏–ª–∏ –¥–∞–∂–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º —Å—Ç—Ä–æ–∫ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Ç–∞–±–ª–∏—Ü—ã –∏–ª–∏ –ø–∞—Ä—Ç–∏—Ü–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –º—ã –º–æ–∂–µ–º –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –æ–∫–Ω–æ, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è –≤ –æ–∫–æ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é, –∫–∞–∫ –ø—Ä–µ–¥—ã–¥—É—â–∞—è + —Ç–µ–∫—É—â–∞—è —Å—Ç—Ä–æ–∫–∞ —Ç–∞–±–ª–∏—Ü—ã. –ò —Ç–æ–≥–¥–∞ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∞–≥—Ä–µ–≥–∞—Ç–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –±—É–¥–µ—Ç –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞—Ç—å—Å—è –ø–æ-—Å–≤–æ–µ–º—É, —Ç–∞–∫ –∫–∞–∫ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—Å—Ç—É–ø–∞—é—Ç –≤ —Ñ—É–Ω–∫—Ü–∏—é –±—É–¥—É—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –º–µ–Ω—è—Ç—å—Å—è –æ—Ç —Å—Ç—Ä–æ–∫–µ –∫ —Å—Ç—Ä–æ–∫–µ. –û–∫–Ω–æ –±—É–¥–µ—Ç –∫–∞–∫ –±—ã ¬´—Å–∫–æ–ª—å–∑–∏—Ç—å¬ª –ø–æ —Ç–∞–±–ª–∏—Ü–µ.

**–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è**

–û–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤—Å–µ–≥–¥–∞ –ø—Ä–∏–Ω–∏–º–∞—é—Ç –Ω–∞ –≤—Ö–æ–¥ –æ–∫–Ω–æ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä–æ–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å—Ç–æ–ª–±–µ—Ü.

–î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –∫–∞–∫ —ç—Ç–æ –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å. –î–ª—è —ç—Ç–æ–≥–æ –≤–æ–∑—å–º—ë–º –æ–∫–æ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é AVG –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å—Ä–µ–¥–Ω–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏ –≤–æ—Ç —Ç–∞–∫—É—é –Ω–µ–±–æ–ª—å—à—É—é —Ç–∞–±–ª–∏—Ü—É

![WindowFunctionAVG](assets/img/01.png)

–ê —Ç–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –∫–∞–∫ –æ–∫–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –æ–∫–æ–Ω:
- –µ—Å–ª–∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ–∫–Ω–∞ —É–∫–∞–∑–∞—Ç—å –≤—Å—é —Ç–∞–±–ª–∏—Ü—É, —Ç–æ –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫ –æ–∫–Ω–æ –±—É–¥–µ—Ç —Å–æ–≤–ø–∞–¥–∞—Ç—å –∏ –Ω–∞ –≤—Ö–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏ AVG –±—É–¥–µ—Ç –ø–æ—Å—Ç—É–ø–∞—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö, –∏, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π;

![WindowFunctionAVG](assets/img/02.png)

- –µ—Å–ª–∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ–∫–Ω–∞ —É–∫–∞–∑–∞—Ç—å –ø–∞—Ä—Ç–∏—Ü–∏—é –ø–æ –ø–æ–ª—é home_type, —Ç–æ –Ω–∞ –≤—Ö–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏ AVG –±—É–¥–µ—Ç –ø–æ—Å—Ç—É–ø–∞—Ç—å –Ω–∞–±–æ—Ä –∂–∏–ª—ã—Ö –ø–æ–º–µ—â–µ–Ω–∏–π —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º —Ç–∏–ø–æ–º, –∏, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤ –Ω–æ–≤–æ–π –∫–æ–ª–æ–Ω–∫–µ –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —Å—Ä–µ–¥–Ω—è—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ –∂–∏–ª—å—é, —á–µ–π —Ç–∏–ø —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ç–∏–ø–æ–º —É —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–æ–∫–∏ —Ç–∞–±–ª–∏—Ü—ã.

![WindowFunctionAVG](assets/img/03.png)

–í –∫–∞—á–µ—Å—Ç–≤–µ –æ–∫–Ω–∞ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∏ –±–æ–ª–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–π –Ω–∞–±–æ—Ä —Å—Ç—Ä–æ–∫. –ù–∞–ø—Ä–∏–º–µ—Ä, –æ–∫–Ω–æ –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞–∫ "–ø—Ä–µ–¥—ã–¥—É—â–∞—è + —Ç–µ–∫—É—â–∞—è —Å—Ç—Ä–æ–∫–∞" —Ç–∞–±–ª–∏—Ü—ã. –¢–æ–≥–¥–∞ —ç—Ç–æ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

![WindowFunctionAVG](assets/img/04.png)

–°—Ç–æ–∏—Ç –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –¥–ª—è –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–∏ –æ–∫–Ω–æ –±—É–¥–µ—Ç —Å–æ—Å—Ç–æ—è—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑ 1-–æ–π –∑–∞–ø–∏—Å–∏, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å—Ç—Ä–æ–∫–∏ –Ω–µ—Ç.

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å –æ–∫–æ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏**

    SELECT <–æ–∫–æ–Ω–Ω–∞—è_—Ñ—É–Ω–∫—Ü–∏—è>(<–ø–æ–ª–µ_—Ç–∞–±–ª–∏—Ü—ã>)
    OVER (
      [PARTITION BY <—Å—Ç–æ–ª–±—Ü—ã_–¥–ª—è_—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è>]
      [ORDER BY <—Å—Ç–æ–ª–±—Ü—ã_–¥–ª—è_—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏>]
      [ROWS|RANGE <–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ_–¥–∏–∞–ø–∞–∑–æ–Ω–∞_—Å—Ç—Ä–æ–∫>]
    )

–ì–¥–µ:
<–æ–∫–æ–Ω–Ω–∞—è_—Ñ—É–Ω–∫—Ü–∏—è>(<–ø–æ–ª–µ_—Ç–∞–±–ª–∏—Ü—ã>) ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –æ–∫–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è. 
–ù–∞–ø—Ä–∏–º–µ—Ä AVG(price).
–î–∞–ª–µ–µ —Å–ª–µ–¥—É–µ—Ç OVER, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ–∫–Ω–æ (–≥—Ä—É–ø–ø—É —Å—Ç—Ä–æ–∫), –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è –≤ –æ–∫–æ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é. –ï—Å–ª–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é OVER () –æ—Å—Ç–∞–≤–∏—Ç—å –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, —Ç–æ –æ–∫–Ω–æ–º –±—É–¥–µ—Ç –≤—ã—Å—Ç—É–ø–∞—Ç—å –≤—Å—è —Ç–∞–±–ª–∏—Ü–∞.

–î–∞–ª–µ–µ –≤–Ω—É—Ç—Ä–∏ OVER —Å–ª–µ–¥—É—é—Ç 3 –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–∂–Ω–æ –≥–∏–±–∫–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –æ–∫–Ω–æ:
‚Ä¢	—Å –ø–æ–º–æ—â—å—é PARTITION BY <—Å—Ç–æ–ª–±—Ü—ã_–¥–ª—è_—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è> –≤—ã–±–æ—Ä–∫–∞ –¥–µ–ª–∏—Ç—Å—è –Ω–∞ –Ω–µ–ø–µ—Ä–µ—Å–µ–∫–∞—é—â–∏–µ—Å—è –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–∞, –≥–¥–µ –∫–∞–∂–¥–æ–µ –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç—Ä–æ–∫–∏ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –≤ –æ–¥–Ω–æ–º –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç–æ–ª–±—Ü–∞—Ö, –æ–±—Ä–∞–∑—É—é—Ç—Å—è –ø–∞—Ä—Ç–∏—Ü–∏–∏.
‚Ä¢	—Å –ø–æ–º–æ—â—å—é ORDER BY <—Å—Ç–æ–ª–±—Ü—ã_–¥–ª—è_—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏> —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø–æ—Ä—è–¥–æ–∫ —Å—Ç—Ä–æ–∫ –≤–Ω—É—Ç—Ä–∏ –æ–∫–Ω–∞, –æ—Å–æ–±–æ –≤–∞–∂–Ω—É—é —Ä–æ–ª—å –∏–≥—Ä–∞–µ—Ç –≤ –æ–∫–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è.
‚Ä¢	—Å –ø–æ–º–æ—â—å—é ROWS|RANGE <–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ_–¥–∏–∞–ø–∞–∑–æ–Ω–∞_—Å—Ç—Ä–æ–∫> —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –¥–∏–∞–ø–∞–∑–æ–Ω—ã —Å—Ç—Ä–æ–∫. –° –ø–æ–º–æ—â—å—é —ç—Ç–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫ –±—Ä–∞—Ç—å –¥–æ –∏ –ø–æ—Å–ª–µ —Ç–µ–∫—É—â–µ–π –≤ –æ–∫–Ω–æ.

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–∫–æ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏**

–î–ª—è –Ω–∞—á–∞–ª–∞ –ø–æ–ª—É—á–∏–º —Å–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–ª–∞—Å—Å–∞, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω–∏ —É—á–∞—Ç—Å—è:

    SELECT
        Student.first_name,
        Student.last_name,
        Student_in_class.class
    FROM
        Student_in_class
    JOIN
        Student ON Student_in_class.student = Student.id;

| first_name | last_name | class | 
| ------------- | ------------- | ------------- |
| Nikolaj | Sokolov | 9 |
| Vyacheslav | Eliseev | 9 |
| Ivan | Efremov | 9 |
| Anatolij | Zhdanov | 9 |
| Georgij | Noskov | 9 |
| Artyom | Sergeev | 9 |
| . | . | . |
| Egor | Belyakov | 1 |

–ê —Ç–µ–ø–µ—Ä—å, —á—Ç–æ–±—ã –≤—ã—á–∏—Å–ª–∏—Ç—å —Å–∫–æ–ª—å–∫–æ —É—á–∞—â–∏—Ö—Å—è —É—á–∏—Ç—Å—è –≤ –∫–∞–∂–¥–æ–º –∏–∑ –∫–ª–∞—Å—Å–æ–≤ –∏ –≤—ã–≤–µ—Å—Ç–∏ —ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –Ω–æ–≤—É—é –∫–æ–ª–æ–Ω–∫—É, –º—ã –º–æ–∂–µ–º –ø—Ä–∏–º–µ–Ω–∏—Ç—å –æ–∫–æ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é:

    SELECT
        Student.first_name,
        Student.last_name,
        Student_in_class.class,
        COUNT(*) OVER (PARTITION BY Student_in_class.class) AS student_count_in_class
    FROM
        Student_in_class
    JOIN
        Student ON Student_in_class.student = Student.id;

| first_name | last_name | class | student_count_in_class |
| ------------- | ------------- | ------------- | ------------- |
| Egor | Belyakov | 1 | 7 |
| Artyom | Nikitin | 1 | 7 |
| Innokentij | Nekrasov | 1 | 7 |
| Semyon | Voronov | 1 | 7 |
| Angelina | Lazareva | 1 | 7 |
| Margarita | Kabanova | 1 | 7 |
| . | . | . | . |
| Nikolaj | Sokolov | 9 | 13 |

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –Ω–∞—à–∞ –æ–∫–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è**

–í—ã—Ä–∞–∂–µ–Ω–∏–µ PARTITION BY Student_in_class.class —Ä–∞–∑–¥–µ–ª—è–µ—Ç –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ —Ç–∞–±–ª–∏—Ü—ã –Ω–∞ –ø–∞—Ä—Ç–∏—Ü–∏–∏ –ø–æ –ø–æ–ª—é class. –¢–∞–∫, –¥–ª—è –∫–∞–∂–¥–æ–π –∏–∑ —Å—Ç—Ä–æ–∫ –≤ –æ–∫–æ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –±—É–¥—É—Ç –ø–æ–¥–∞–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ —Å—Ç—Ä–æ–∫–∏ —Ç–∞–±–ª–∏—Ü—ã, –≥–¥–µ –ø–æ–ª–µ class —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –ø–æ–ª–µ–º class –≤ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–æ–∫–µ.
–§—É–Ω–∫—Ü–∏—è COUNT –∂–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –≤ –Ω–µ—ë —Å—Ç—Ä–æ–∫, —Ç–µ–º —Å–∞–º—ã–º –º—ã –∏ –ø–æ–ª—É—á–∞–µ–º —Å–∫–æ–ª—å–∫–æ —É—á–∞—â–∏—Ö—Å—è —É—á–∏—Ç—Å—è –≤ –∫–∞–∂–¥–æ–º –∏–∑ –∫–ª–∞—Å—Å–æ–≤.

**–ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–∫–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –≤ SELECT**

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –æ–∫–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –≤–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å –≤ –∫–∞–∫–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –æ–Ω–∏ –±—É–¥—É—Ç –∏—Å–ø–æ–ª–Ω—è—Ç—å—Å—è. –¢–∞–∫, –∫–∞–∫ –º—ã –º–æ–∂–µ–º —É–≤–∏–¥–µ—Ç—å –Ω–∞ —Å—Ö–µ–º–µ –Ω–∏–∂–µ, –æ–∫–Ω–∞ –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –ø—Ä–µ–¥–ø–æ—Å–ª–µ–¥–Ω–∏–º —à–∞–≥–æ–º, —É–∂–µ –ø–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏, –Ω–æ –ø–µ—Ä–µ–¥ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤—ã–±–æ—Ä–∫–∏.

![WindowFunctionInSelect](assets/img/05.png)

### #3.1 –ü–∞—Ä—Ç–∏—Ü–∏–∏ –æ–∫–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

**–ü–æ–Ω—è—Ç–∏–µ –ø–∞—Ä—Ç–∏—Ü–∏–∏**

–ü–∞—Ä—Ç–∏—Ü–∏–∏ ‚Äî –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∫, –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–µ –¥–ª—è –æ–∫–æ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–¥–Ω–æ–≥–æ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç–æ–ª–±—Ü–æ–≤ –≤ —Ç–∞–±–ª–∏—Ü–µ.

–û–Ω–∏ —Å–ª—É–∂–∞—Ç –¥–ª—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö, –ø–æ–∑–≤–æ–ª—è—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏ —Ä–∞—Å—á—ë—Ç—ã –≤—Ä–æ–¥–µ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –∏–ª–∏ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–π —Ç–∞–∫–æ–π –≥—Ä—É–ø–ø—ã.

–ü—Ä–∏–º–µ–Ω—è—è –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ —Ç–∏–ø—É –∂–∏–ª—å—è –≤ —Ç–∞–±–ª–∏—Ü–µ —Å –¥–∞–Ω–Ω—ã–º–∏ –æ —Ü–µ–Ω–µ –∂–∏–ª—å—è, –º—ã –º–æ–∂–µ–º —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –∫–æ–ª–æ–Ω–∫–µ, —Å–∫–∞–∂–µ–º, —Å—Ä–µ–¥–Ω—é—é —Ü–µ–Ω—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –∂–∏–ª—å—è.

![Partition](assets/img/06.png)

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä—Ç–∏—Ü–∏–π –≤ SQL**

–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ä—Ç–∏—Ü–∏—é –≤–º–µ—Å—Ç–µ —Å –æ–∫–æ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞:

    SELECT <–æ–∫–æ–Ω–Ω–∞—è_—Ñ—É–Ω–∫—Ü–∏—è>(<–ø–æ–ª–µ_—Ç–∞–±–ª–∏—Ü—ã>)
    OVER (
        PARTITION BY <—Å—Ç–æ–ª–±—Ü—ã_–¥–ª—è_—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è>
    )

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ä—Ç–∏—Ü–∏–∏ –≤–º–µ—Å—Ç–µ —Å –æ–∫–æ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π.

![Partition_WindowFunction](assets/img/07.png)

–î–ª—è —ç—Ç–æ–≥–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ç–∞–±–ª–∏—Ü—É Rooms, –∞ –∏–º–µ–Ω–Ω–æ –ø–æ–ª—è home_type –∏ price:

    SELECT home_type, price FROM Rooms;

| home_type | price | 
| ------------- | ------------- |
| Private room | 149 |
| Entire home/apt | 225 |
| Private room | 150 |
| Entire home/apt | 89 |
| Entire home/apt | 80 |
| Entire home/apt | 200 |

–ú—ã –º–æ–∂–µ–º —É–≤–∏–¥–µ—Ç—å, —á—Ç–æ –≤—Å–µ –∂–∏–ª—å—ë –¥–ª—è –∞—Ä–µ–Ω–¥—ã —Ä–∞–∑–¥–µ–ª–µ–Ω–æ –Ω–∞ 3 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: ¬´Private room¬ª, ¬´Entire home/apt¬ª –∏ ¬´Shared room¬ª.
–ö–∞–∂–¥–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è –∂–∏–ª—å—è –∏–º–µ–µ—Ç —Å–≤–æ–∏ —Ü–µ–Ω–æ–≤—ã–µ —Ä–∞–º–∫–∏. –ß—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å —Å—Ä–µ–¥–Ω—é—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Å—Ä–∞–≤–Ω–∏—Ç—å –µ—ë —Å —Ç–µ–∫—É—â–µ–π, –∫–∞–∫ —Ä–∞–∑ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏.

–î–ª—è —ç—Ç–æ–≥–æ –¥–æ–±–∞–≤–∏–º –∫ –Ω–∞—à–µ–π —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü–µ –µ—â—ë –æ–¥–Ω–æ –ø–æ–ª–µ avg_price, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –≤—ã—Å—á–∏—Ç—ã–≤–∞—Ç—å —Å—Ä–µ–¥–Ω—é—é —Ü–µ–Ω—É –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º. –≠—Ç–æ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

    SELECT
        home_type, price,
        AVG(price) OVER (PARTITION BY home_type) AS avg_price
    FROM Rooms;

| home_type | price | avg_price |
| ------------- | ------------- | ------------- |
| Entire home/apt | 225 | 148.6667 |
| Entire home/apt | 180 | 148.6667 |
| Entire home/apt | 150 | 148.6667 |
| . | . | . |
| Private room | 130 | 89.4286 |
| Private room | 120 | 89.4286 |
| . | . | . |
| Shared room | 40 | 40 |

–ß—Ç–æ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–µ?

‚Ä¢	PARTITION BY home_type –¥–µ–ª–∏—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏ –Ω–∞ —Ä–∞–∑–Ω—ã–µ –ø–∞—Ä—Ç–∏—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π —Å—Ç–æ–ª–±—Ü–∞ home_type;
‚Ä¢	–∑–∞—Ç–µ–º, –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–ø–∏—Å–∏, AVG(price) –≤—ã—á–∏—Å–ª—è–µ—Ç —Å—Ä–µ–¥–Ω—é—é —Ü–µ–Ω—É (price) –≤ —Ä–∞–º–∫–∞—Ö –µ—ë –ø–∞—Ä—Ç–∏—Ü–∏–∏ (home_type), —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–π —á–∞—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–∞ –±—É–¥–µ—Ç —Å—Ç–æ–ª–±–µ—Ü avg_price, –≤ –∫–æ—Ç–æ—Ä–æ–º –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–ø–∏—Å–∏ –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω–æ —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ü–µ–Ω—ã –¥–ª—è –µ—ë –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∂–∏–ª—å—è (home_type).

**–ü–∞—Ä—Ç–∏—Ü–∏—è –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –∫–æ–ª–æ–Ω–∫–∞–º**

–ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –∫–æ–ª–æ–Ω–∫–∞–º. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ –∏ —Ç–æ—á–Ω—ã–µ —Å–µ–≥–º–µ–Ω—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞.

–ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –Ω–∞—à–µ–π —Ç–∞–±–ª–∏—Ü—ã Rooms –º—ã –º–æ–∂–µ–º —Å–æ–∑–¥–∞—Ç—å –ø–∞—Ä—Ç–∏—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ 2 –∫–æ–ª–æ–Ω–æ–∫: –∫–∞—Ç–µ–≥–æ—Ä–∏—è –∂–∏–ª—å—è home_type –∏ –Ω–∞–ª–∏—á–∏–µ —Ç–µ–ª–µ–≤–∏–∑–æ—Ä–∞ –≤ –∂–∏–ª—å–µ has_tv.

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ —Å –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø–æ –¥–≤—É–º —Å—Ç–æ–ª–±—Ü–∞–º:

    SELECT
        home_type, has_tv, price,
        AVG(price) OVER (PARTITION BY home_type, has_tv) AS avg_price
    FROM Rooms;

| home_type | price | avg_price | avg_price |
| ------------- | ------------- | ------------- | ------------- |
| Entire home/apt | 0 | 225 | 170 |
| Entire home/apt | 0 | 180 | 170 |
| . | . | . | . |
| Entire home/apt | 0 | 190 | 170 |
| Entire home/apt | 0 | 215 | 170 |
| . | . | . | . |
| Entire home/apt | 1 | 85 | 132.6667 |
| Entire home/apt | 1 | 150 | 132.6667 |

–ó–¥–µ—Å—å PARTITION BY home_type, has_tv —Å–æ–∑–¥–∞—ë—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–∞—Ä—Ç–∏—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ home_type –∏ has_tv, –ø–æ–∑–≤–æ–ª—è—è –≤—ã—á–∏—Å–ª–∏—Ç—å —Å—Ä–µ–¥–Ω—é—é —Ü–µ–Ω—É –∂–∏–ª—å—è –¥–ª—è —Ç–µ–∫—É—â–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∂–∏–ª—å—è —Å –Ω–∞–ª–∏—á–∏–µ–º –∏–ª–∏ –±–µ–∑ –Ω–∞–ª–∏—á–∏—è —Ç–µ–ª–µ–≤–∏–∑–æ—Ä–∞.

![PartitionAVG](assets/img/08.png)

### #3.2 –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –≤–Ω—É—Ç—Ä–∏ –æ–∫–Ω–∞

**–ó–∞—á–µ–º –Ω—É–∂–Ω–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –≤–Ω—É—Ç—Ä–∏ –æ–∫–Ω–∞**

–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –≤ –æ–∫–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö SQL ‚Äî –∫–ª—é—á –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–º—É –∞–Ω–∞–ª–∏–∑—É –¥–∞–Ω–Ω—ã—Ö. –û–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –≥—Ä—É–ø–ø—ã –∏–ª–∏ –æ–∫–Ω–∞, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ –∏ –Ω–∞—Ü–µ–ª–µ–Ω–Ω—ã–µ –∞–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Ä—è–¥–∞–º–∏, –≥–¥–µ –≤–∞–∂–µ–Ω –ø–æ—Ä—è–¥–æ–∫ —Å–æ–±—ã—Ç–∏–π, –∏–ª–∏ –ø—Ä–∏ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä–∏ –≥—Ä—É–ø–ø.

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**

*–ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–¥–∞—á–∏*

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, –Ω–∞–º –Ω—É–∂–Ω–æ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è—Ö –∂–∏–ª—ã—Ö –ø–æ–º–µ—â–µ–Ω–∏–π, —á—Ç–æ–±—ã –≤—ã—è—Å–Ω–∏—Ç—å, –∫–∞–∫ –º–µ–Ω—è–ª–∞—Å—å –æ–±—â–∞—è —Å—É–º–º–∞ –∑–∞—Ç—Ä–∞—á–µ–Ω–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –∞—Ä–µ–Ω–¥—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º.
–ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –º—ã –∏–º–µ–µ–º —Å–ª–µ–¥—É—é—â—É—é –≤—ã–±–æ—Ä–∫—É –æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è—Ö:

![Example](assets/img/09.png)

–ê –∫–∞–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º—ã —Ö–æ—Ç–∏–º —É–≤–∏–¥–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∑–∞—Ç—Ä–∞—á–µ–Ω–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ –ø–æ –∫–∞–∂–¥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º, —Ç–æ –µ—Å—Ç—å —Ç–∞–±–ª–∏—Ü—É —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–∏–¥–∞:

![Example](assets/img/10.png)

*–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –ø–∞—Ä—Ç–∏—Ü–∏–∏*

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å, –º—ã –¥–æ–ª–∂–Ω—ã —Ä–∞–∑–±–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ –ø–∞—Ä—Ç–∏—Ü–∏–∏ –ø–æ –∫–∞–∂–¥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, —á—Ç–æ–± –æ–∫–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞–ª–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ. –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∂–µ —Å—É–º–º—ã –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–∫–æ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é SUM.

    SELECT user_id,
        start_date,
        total AS reservation_price,
        SUM(total) OVER (
                PARTITION BY user_id
        ) AS total_expenses
    FROM Reservations;

![Example](assets/img/11.png)

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –≤ –∫–æ–ª–æ–Ω–∫–µ total_expenses –≤—ã–≤–µ–ª–∞—Å—å –æ–±—â–∞—è —Å—É–º–º–∞ –∑–∞—Ç—Ä–∞—á–µ–Ω–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ —Å —Ä–∞–∑–±–∏–≤–∫–æ–π –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º. –ù–æ —ç—Ç–æ –Ω–µ —Å–æ–≤—Å–µ–º —Ç–æ, —á—Ç–æ –º—ã —Ö–æ—Ç–∏–º: –¥–∞–Ω–Ω—ã–µ –≤ —Ç–∞–±–ª–∏—Ü–µ –Ω–µ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã –ø–æ –¥–∞—Ç–µ –∏ –º—ã –Ω–µ –≤–∏–¥–∏–º –∫–∞–∫ –æ–±—â–∏–µ —Ä–∞—Å—Ö–æ–¥—ã —Ä–æ—Å–ª–∏ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º, –º—ã –≤–∏–¥–∏–º —Ç–æ–ª—å–∫–æ —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã.

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∂–µ–ª–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –Ω–∞–º –∫–∞–∫ —Ä–∞–∑ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –≤ –∑–∞–ø—Ä–æ—Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –ø–æ –¥–∞—Ç–µ –Ω–∞—á–∞–ª–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:

    SELECT user_id,
        start_date,
        total AS reservation_price,
        SUM(total) OVER (
            PARTITION BY user_id
            ORDER BY start_date
        ) AS cumulative_total
    FROM Reservations;

![Example](assets/img/12.png)

–¢–µ–ø–µ—Ä—å –º—ã –ø–æ–ª—É—á–∏–ª–∏ —Ç–æ, —á—Ç–æ –∏ —Ö–æ—Ç–µ–ª–∏. –ù–æ —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è ORDER BY start_date?

1.	–î–∞–Ω–Ω—ã–µ –≤ —Ä–∞–º–∫–∞—Ö –ø–∞—Ä—Ç–∏—Ü–∏–∏ —Å—Ç–∞–ª–∏ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –¥–∞—Ç–µ –Ω–∞—á–∞–ª–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.
2.	–ò–∑–º–µ–Ω–∏–ª—Å—è —Å–ø–æ—Å–æ–± –ø–æ–¥—Å—á—ë—Ç–∞ –æ–±—â–µ–π —Å—É–º–º—ã –∑–∞—Ç—Ä–∞—á–µ–Ω–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤: —Ç–µ–ø–µ—Ä—å —Å—É–º–º–∞ –≤ —Ä–∞–º–∫–∞—Ö –ø–∞—Ä—Ç–∏—Ü–∏–∏ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è, –∞ –Ω–µ –≤—ã–≤–æ–¥–∏—Ç—Å—è –∫–∞–∫ —Ñ–∏–Ω–∞–ª—å–Ω–∞—è. –≠—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å –æ–¥–Ω–æ–π –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –±–µ–∑ —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è ROWS|RANGE –≤ –≤—ã—Ä–∞–∂–µ–Ω–∏–∏ OVER. –ù–∞ —ç—Ç–æ–º –æ—Å—Ç–∞–Ω–æ–≤–∏–º—Å—è –ø–æ–ø–æ–¥—Ä–æ–±–Ω–µ–µ.

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è —Ä–∞–º–æ–∫ –æ–∫–Ω–∞

–ö–∞–∫ –º—ã –ø–æ–º–Ω–∏–º –ø–æ–ª–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –æ–∫–æ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

    SELECT <–æ–∫–æ–Ω–Ω–∞—è_—Ñ—É–Ω–∫—Ü–∏—è>(<–ø–æ–ª–µ_—Ç–∞–±–ª–∏—Ü—ã>)
    OVER (
        [PARTITION BY <—Å—Ç–æ–ª–±—Ü—ã_–¥–ª—è_—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è>]
        [ORDER BY <—Å—Ç–æ–ª–±—Ü—ã_–¥–ª—è_—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏>]
        [ROWS|RANGE <–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ_–¥–∏–∞–ø–∞–∑–æ–Ω–∞_—Å—Ç—Ä–æ–∫>]
    )

–ü–æ–º–∏–º–æ –±–ª–æ–∫–∞ —Å PARTITION BY –∏ ORDER BY –≤ –Ω–µ–º –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –±–ª–æ–∫ ROWS|RANGE, –Ω–∞ –Ω–µ–º –º—ã –æ—Å—Ç–∞–Ω–æ–≤–∏–º—Å—è –¥–µ—Ç–∞–ª—å–Ω–æ –¥–∞–ª–µ–µ, –Ω–æ —Å–µ–π—á–∞—Å –≤–∞–∂–Ω–µ–µ, —Ç–æ –¥–ª—è —á–µ–≥–æ –æ–Ω –Ω—É–∂–µ–Ω. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–∫–∞–∑–∞—Ç—å —Ä–∞–º–∫–∏ –æ–∫–Ω–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤ –æ–∫–æ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏.
–¢–∞–∫, –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å, —á—Ç–æ–±—ã –ø—Ä–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–æ–∫–∏ –≤ –æ–∫–æ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç–ø—Ä–∞–≤–∏–ª–∏—Å—å –Ω–µ –≤—Å–µ –∑–∞–ø–∏—Å–∏ –≤ —Ä–∞–º–∫–∞—Ö —Ç–µ–∫—É—â–µ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏, –∞ —Ç–æ–ª—å–∫–æ N –∑–∞–ø–∏—Å–µ–π –¥–æ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–æ–∫–∏ –∏ N –ø–æ—Å–ª–µ.
–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ ORDER BY, –µ—Å–ª–∏ –≤ –±–ª–æ–∫–µ ROWS|RANGE –Ω–∏—á–µ–≥–æ –Ω–µ —É–∫–∞–∑–∞–Ω–æ, —Ç–æ –≤ –æ–∫–æ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª–æ RANGE BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ–∫–Ω–æ –±—É–¥–µ—Ç –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–∏ –∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–æ–∫–æ–π.
–¢–æ –µ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –∫–æ–ª–æ–Ω–∫–∏ cumulative_total –±—É–¥—É—Ç –≤—ã—Å—á–∏—Ç—ã–≤–∞—Ç—å—Å—è —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

![Example](assets/img/13.png)

### #3.3 –†–∞–º–∫–∏ –æ–∫–æ–Ω

–í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –æ–∫–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π SQL, ¬´–æ–∫–Ω–æ¬ª –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—é—Ç—Å—è SQL-—Ñ—É–Ω–∫—Ü–∏–µ–π –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π.

–î—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, –æ–∫–Ω–æ ‚Äî —ç—Ç–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –Ω–∞–±–æ—Ä —Å—Ç—Ä–æ–∫, –∫–æ—Ç–æ—Ä—ã–π "—Å–∫–æ–ª—å–∑–∏—Ç" –ø–æ –≤–∞—à–µ–º—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –∑–∞–ø—Ä–æ—Å–∞, –æ–±—Ä–∞–∑—É—è —Ä–∞–∑–ª–∏—á–Ω—ã–µ –Ω–∞–±–æ—Ä—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –≤–∞–º–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ–∫–Ω–∞.

**–û–∫–Ω–æ VS –ü–∞—Ä—Ç–∏—Ü–∏—è**

–•–æ—Ç—è —Ç–µ—Ä–º–∏–Ω—ã "–æ–∫–Ω–æ" –∏ "–ø–∞—Ä—Ç–∏—Ü–∏—è" –º–æ–≥—É—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è —Å—Ö–æ–∂–∏–º–∏, –æ–Ω–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Ä–∞–∑–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏:

–ü–∞—Ä—Ç–∏—Ü–∏—è (PARTITION BY) - —ç—Ç–æ –¥–µ–ª–µ–Ω–∏–µ –≤—Å–µ–≥–æ –Ω–∞–±–æ—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–∞ –Ω–µ–ø–µ—Ä–µ—Å–µ–∫–∞—é—â–∏–µ—Å—è –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–∞, 
–≥–¥–µ –∫–∞–∂–¥–æ–µ –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç—Ä–æ–∫–∏ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –≤ –æ–¥–Ω–æ–º –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç–æ–ª–±—Ü–∞—Ö. 
–û–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –∫ –∫–∞–∂–¥–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏, –∫–∞–∫ –µ—Å–ª–∏ –±—ã –∫–∞–∂–¥–∞—è –∏–∑ –Ω–∏—Ö –±—ã–ª–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–º 
–Ω–∞–±–æ—Ä–æ–º –¥–∞–Ω–Ω—ã—Ö.

![Example](assets/img/14.png)

–û–∫–Ω–æ - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –≤ –∫–∞–∂–¥–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –æ–∫–æ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏. –û–∫–Ω–æ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å—Å—è –æ—Ç —Å—Ç—Ä–æ–∫–∏ –∫ —Å—Ç—Ä–æ–∫–µ.

–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª–æ ROWS BETWEEN 1 PRECEDING AND CURRENT ROW, —Ç–æ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏ –æ–∫–Ω–æ –±—É–¥–µ—Ç —Å–æ—Å—Ç–æ—è—Ç—å –∏–∑ –Ω–µ—ë —Å–∞–º–æ–π –∏ –æ–¥–Ω–æ–π –ø—Ä–µ–¥—à–µ—Å—Ç–≤—É—é—â–µ–π —Å—Ç—Ä–æ–∫–∏. –≠—Ç–æ –∫–∞–∫ "–ø–æ–¥–ø–∞—Ä—Ç–∏—Ü–∏—è" –≤–Ω—É—Ç—Ä–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏.

![Example](assets/img/15.png)

–¢–æ –µ—Å—Ç—å:

‚Ä¢	–ü–µ—Ä–≤–æ–µ –æ–∫–Ω–æ —É –Ω–∞—Å —Å–æ—Å—Ç–æ–∏—Ç —Ç–æ–ª—å–∫–æ –∏–∑ 1-–æ–π –∑–∞–ø–∏—Å–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –∑–∞–ø–∏—Å–∏ –Ω–µ—Ç. –û–¥–Ω–∞ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å –ø–æ–¥–∞—ë—Ç—Å—è –≤ –∞–≥—Ä–µ–≥–∞—Ç–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é AVG(price) –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –ø–æ–ª–µ avg_price;
‚Ä¢	–í—Ç–æ—Ä–æ–µ –æ–∫–Ω–æ —É –Ω–∞—Å —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç 1 –∏ 2 –∑–∞–ø–∏—Å—å, –∫–æ—Ç–æ—Ä—ã–µ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ AVG(price) –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç (170 + 220) / 2 = 195;
‚Ä¢	–¢—Ä–µ—Ç—å–µ –æ–∫–Ω–æ —É –Ω–∞—Å —Å–æ–¥–µ—Ä–∂–∏—Ç 2 –∏ 3 –∑–∞–ø–∏—Å—å, —Ä–µ–∑—É–ª—å—Ç–∞—Ç (220 + 150) / 2 = 185;
‚Ä¢	–∏ —Ç.–¥.

*–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –æ–± –æ–∫–Ω–µ –±–µ–∑ ROWS/RANGE*

–ï—Å–ª–∏ –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –æ–∫–æ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ROWS/RANGE, —Ç–æ–≥–¥–∞ –æ–∫–Ω–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –ø–∞—Ä—Ç–∏—Ü–∏–µ–π. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ, –æ–∫–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –≤–Ω—É—Ç—Ä–∏ –ø–∞—Ä—Ç–∏—Ü–∏–∏, –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—è—Å—å –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–æ–º. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –±—É–¥–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤ –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫ –≤–Ω—É—Ç—Ä–∏ —Ç–æ–π –∂–µ –ø–∞—Ä—Ç–∏—Ü–∏–∏.

**–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥—Ä–∞–Ω–∏—Ü –æ–∫–æ–Ω**

–ò—Å–ø–æ–ª—å–∑—É—è —Å–∏–Ω—Ç–∞–∫—Å–∏—Å ROWS –∏–ª–∏ RANGE –º—ã –º–æ–∂–µ–º –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞–∫–æ–µ –∏–º–µ–Ω–Ω–æ –æ–∫–Ω–æ —Å –¥–∞–Ω–Ω—ã–º–∏ –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è –≤ –æ–∫–æ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–æ–∫–∏.

–°–∏–Ω—Ç–∞–∫—Å–∏—Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≥—Ä–∞–Ω–∏—Ü –æ–∫–Ω–∞ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ —É–∫–∞–∑–∞–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–æ–∫–∏.

    SELECT <–æ–∫–æ–Ω–Ω–∞—è_—Ñ—É–Ω–∫—Ü–∏—è>(<–ø–æ–ª–µ_—Ç–∞–±–ª–∏—Ü—ã>)
    OVER (
        ...
        ROWS|RANGE BETWEEN <–Ω–∞—á–∞–ª–æ –≥—Ä–∞–Ω–∏—Ü—ã –æ–∫–Ω–∞> AND <–∫–æ–Ω–µ—Ü –≥—Ä–∞–Ω–∏—Ü—ã –æ–∫–Ω–∞>
    )

–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã –≤ –æ–∫–æ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è—Ö –ø–æ–ø–∞–¥–∞–ª–∏ —Ç–æ–ª—å–∫–æ –¥–≤–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∑–∞–ø–∏—Å–∏ –∏ —Ç–µ–∫—É—â–∞—è —Å—Ç—Ä–æ–∫–∞, —Ç–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

    ... ROWS|RANGE BETWEEN 2 PRECEDING AND CURRENT ROW

–ï—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã –≤ –æ–∫–æ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∏—Å—å —Ç–µ–∫—É—â–∞—è —Å—Ç—Ä–æ–∫–∞ –∏ –≤—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ, —Ç–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

    ... ROWS|RANGE BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING

*–í–æ–∑–º–æ–∂–æ–Ω—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≥—Ä–∞–Ω–∏—Ü –æ–∫–æ–Ω*

‚Ä¢	UNBOUNDED PRECEDING, –≤—Å–µ —Å—Ç—Ä–æ–∫–∏, –ø—Ä–µ–¥—à–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ–∫—É—â–µ–π;
‚Ä¢	N PRECEDING, N —Å—Ç—Ä–æ–∫ –¥–æ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–æ–∫–∏;
‚Ä¢	CURRENT ROW, —Ç–µ–∫—É—â–∞—è —Å—Ç—Ä–æ–∫–∞;
‚Ä¢	N FOLLOWING, N —Å—Ç—Ä–æ–∫ –ø–æ—Å–ª–µ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–æ–∫–∏;
‚Ä¢	UNBOUNDED FOLLOWING, –≤—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏.

*–°—Ö–µ–º–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≥—Ä–∞–Ω–∏—Ü –æ–∫–Ω–∞*

![Example](assets/img/16.png)

**–û—Ç–ª–∏—á–∏–µ ROWS –æ—Ç RANGE**

–î–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≥—Ä–∞–Ω–∏—Ü –æ–∫–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ ROWS –∏ RANGE. –†–∞–±–æ—Ç–∞—é—Ç –æ–Ω–∏ –ø–æ-—Ä–∞–∑–Ω–æ–º—É:

*ROWS*

‚Ä¢	–û—Å–Ω–æ–≤–∞–Ω –Ω–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä–æ–∫–∞—Ö:
–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ ROWS, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–∫–Ω–∞ –æ—Å–Ω–æ–≤—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º –ø–æ–ª–æ–∂–µ–Ω–∏–∏ —Å—Ç—Ä–æ–∫ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–æ–∫–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, 1 PRECEDING –æ–∑–Ω–∞—á–∞–µ—Ç –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É –¥–æ —Ç–µ–∫—É—â–µ–π.
‚Ä¢	–¢–æ—á–Ω–∞—è –≥—Ä–∞–Ω–∏—Ü–∞:
–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–∫–Ω–∞ —Å –ø–æ–º–æ—â—å—é ROWS —á—ë—Ç–∫–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –≤–∫–ª—é—á–∞—é—Ç—Å—è –≤ –æ–∫–Ω–æ, –¥–µ–ª–∞—è –µ–≥–æ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º.

![Example](assets/img/17.png)

*RANGE*

‚Ä¢	–û—Å–Ω–æ–≤–∞–Ω –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏—è—Ö:
RANGE, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç ROWS, –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≥—Ä–∞–Ω–∏—Ü—ã –æ–∫–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–Ω–∞—á–µ–Ω–∏–π —Å—Ç–æ–ª–±—Ü–æ–≤, —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã—Ö –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å ORDER BY –≤ –æ–∫–æ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏.
‚Ä¢	–î–∏–Ω–∞–º–∏—á–Ω–æ—Å—Ç—å –≥—Ä–∞–Ω–∏—Ü:
–ì—Ä–∞–Ω–∏—Ü—ã, –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Å –ø–æ–º–æ—â—å—é RANGE, –º–æ–≥—É—Ç –≤–∞—Ä—å–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –æ–∫–Ω–æ –≥–∏–±–∫–∏–º, –Ω–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –º–µ–Ω–µ–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º.

![Example](assets/img/18.png)

### #3.4 –û—Å–Ω–æ–≤–Ω—ã–µ –æ–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

–í –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å—Ç–∞—Ç—å—è—Ö –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–ª–∏ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –æ–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª–∏—Å—å —Å –ø–æ–Ω—è—Ç–∏–µ–º –æ–∫–Ω–∞ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä–æ–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ –æ–∫–æ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é. –ü—Ä–∏—à–ª–æ –≤—Ä–µ–º—è —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∫–∏–µ –æ–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±—ã–≤–∞—é—Ç.

**–í–∏–¥—ã –æ–∫–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π**

![Example](assets/img/19.png)    

–û–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ 3 –≥—Ä—É–ø–ø—ã:

‚Ä¢	–ê–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ –æ–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏;
‚Ä¢	–†–∞–Ω–∂–∏—Ä—É—é—â–∏–µ –æ–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏;
‚Ä¢	–û–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–º–µ—â–µ–Ω–∏—è.

*–ê–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ –æ–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏*

–ê–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ ‚Äî —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç –Ω–∞ –Ω–∞–±–æ—Ä–µ –¥–∞–Ω–Ω—ã—Ö –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∏—Ç–æ–≥–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.

‚Ä¢	SUM ‚Äî –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç –æ–±—â—É—é —Å—É–º–º—É –∑–Ω–∞—á–µ–Ω–∏–π;
‚Ä¢	COUNT ‚Äî —Å—á–∏—Ç–∞–µ—Ç –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ –∫–æ–ª–æ–Ω–∫–µ;
‚Ä¢	AVG ‚Äî —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å—Ä–µ–¥–Ω–µ–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ;
‚Ä¢	MAX ‚Äî –Ω–∞—Ö–æ–¥–∏—Ç –Ω–∞–∏–±–æ–ª—å—à–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ;
‚Ä¢	MIN ‚Äî –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–∏–º–µ–Ω—å—à–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.

    SELECT id,
        home_type,
        price,
        SUM(price) OVER(PARTITION BY home_type) AS 'Sum',
        COUNT(price) OVER(PARTITION BY home_type) AS 'Count',
        AVG(price) OVER(PARTITION BY home_type) AS 'Avg',
        MAX(price) OVER(PARTITION BY home_type) AS 'Max',
        MIN(price) OVER(PARTITION BY home_type) AS 'Min'
    FROM Rooms;

| id | home_type | price | Sum | Count | AVG | Max | Min |
| ------------- | ------------- | ------------- | ------------- | ------------- | ------------- | ------------- | ------------- |
| 2 | Entire home/apt | 225 | 3122 | 21 | 148.6667 | 299 | 80 |
| 30 | Entire home/apt | 180 | 3122 | 21 | 148.6667 | 299 | 80 |
| 28 | Entire home/apt | 150 | 3122 | 21 | 148.6667 | 299 | 80 |

*–†–∞–Ω–∂–∏—Ä—É—é—â–∏–µ –æ–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏*

–†–∞–Ω–∂–∏—Ä—É—é—â–∏–µ –æ–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ ‚Äî —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–Ω–∂–∏—Ä—É—é—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏ –≤ –æ–∫–Ω–µ.
–í —Ä–∞–Ω–∂–∏—Ä—É—é—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö –ø–æ–¥ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–æ–º OVER –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –∏–¥—ë—Ç —É–∫–∞–∑–∞–Ω–∏–µ —É—Å–ª–æ–≤–∏—è ORDER BY, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è.
‚Ä¢	ROW_NUMBER ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–∏, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –Ω—É–º–µ—Ä–∞—Ü–∏–∏;
‚Ä¢	RANK ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–∞–Ω–≥ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏. –í–æ—Ç –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
-	–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –≤–æ-–ø–µ—Ä–≤—ã—Ö, —Å—Ç—Ä–æ–∫–∏ —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ –æ–¥–Ω–æ–º—É –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —Å—Ç–æ–ª–±—Ü–∞–º. –≠—Ç–æ —Å—Ç–æ–ª–±—Ü—ã —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ ORDER BY –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ OVER.
-	–ü—Ä–∏—Å–≤–æ–µ–Ω–∏–µ —Ä–∞–Ω–≥–æ–≤: –∫–∞–∂–¥–æ–π —É–Ω–∏–∫–∞–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ –∏–ª–∏ –≥—Ä—É–ø–ø–µ —Å—Ç—Ä–æ–∫, –∏–º–µ—é—â–∏—Ö –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Å—Ç–æ–ª–±—Ü–∞—Ö —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏, –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è —Ä–∞–Ω–≥. –†–∞–Ω–≥ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 1.
-	–û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: –µ—Å–ª–∏ —É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç—Ä–æ–∫ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Å—Ç–æ–ª–±—Ü–∞—Ö —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏, –æ–Ω–∏ –ø–æ–ª—É—á–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ä–∞–Ω–≥. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –¥–≤–µ —Å—Ç—Ä–æ–∫–∏ –∑–∞–Ω–∏–º–∞—é—Ç –≤—Ç–æ—Ä–æ–µ –º–µ—Å—Ç–æ, –æ–±–µ –ø–æ–ª—É—á–∞—é—Ç —Ä–∞–Ω–≥ 2.
-	–ü—Ä–æ–ø—É—Å–∫ —Ä–∞–Ω–≥–æ–≤: –ø–æ—Å–ª–µ –≥—Ä—É–ø–ø—ã —Å—Ç—Ä–æ–∫ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º —Ä–∞–Ω–≥–æ–º, —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–Ω–≥ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –≤ —ç—Ç–æ–π –≥—Ä—É–ø–ø–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –¥–≤–µ —Å—Ç—Ä–æ–∫–∏ –∏–º–µ—é—Ç —Ä–∞–Ω–≥ 2, —Å–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–æ–∫–∞ –ø–æ–ª—É—á–∏—Ç —Ä–∞–Ω–≥ 4, –∞ –Ω–µ 3.
-	–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏: —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –±—É–¥—É—Ç –ø—Ä–∏—Å–≤–æ–µ–Ω—ã —Ä–∞–Ω–≥–∏ –≤—Å–µ–º —Å—Ç—Ä–æ–∫–∞–º –≤ –Ω–∞–±–æ—Ä–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.
‚Ä¢	DENSE_RANK ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–∞–Ω–≥ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏. –ù–æ –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ RANK, –æ–Ω–∞ –¥–ª—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–∞–Ω–≥, –Ω–µ –ø—Ä–æ–ø—É—Å–∫–∞—è —Å–ª–µ–¥—É—é—â–∏–π.

    SELECT id,
        home_type,
        price,
        ROW_NUMBER() OVER(PARTITION BY home_type ORDER BY price) AS 'row_number',
        RANK() OVER(PARTITION BY home_type ORDER BY price) AS 'rank',
        DENSE_RANK() OVER(PARTITION BY home_type ORDER BY price) AS 'dense_rank'
    FROM Rooms;

| id | home_type | price | row_number | rank | dense_rank |
| ------------- | ------------- | ------------- | ------------- | ------------- | ------------- |
| 5 | Entire home/apt | 80 | 1 | 1 | 1 |
| 38 | Entire home/apt | 85 | 2 | 2 | 1 |

*–û–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–º–µ—â–µ–Ω–∏—è*

–û–∫–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–º–µ—â–µ–Ω–∏—è ‚Äî —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–µ—Ä–µ–º–µ—â–∞—Ç—å—Å—è –∏ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ —Ä–∞–∑–Ω—ã–º —Å—Ç—Ä–æ–∫–∞–º –≤ –æ–∫–Ω–µ, –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–æ–∫–∏, –∞ —Ç–∞–∫–∂–µ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º –≤ –Ω–∞—á–∞–ª–µ –∏–ª–∏ –≤ –∫–æ–Ω—Ü–µ –æ–∫–Ω–∞.

‚Ä¢	LAG ‚Äî –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –¥–∞–Ω–Ω—ã–º –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å—Ç—Ä–æ–∫ –æ–∫–Ω–∞.
–ò–º–µ–µ—Ç —Ç—Ä–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞: —Å—Ç–æ–ª–±–µ—Ü, –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–µ—Ä–Ω—É—Ç—å, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –¥–ª—è —Å–º–µ—â–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1), –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–µ—Ä–Ω—É—Ç—å, –µ—Å–ª–∏ –ø–æ—Å–ª–µ —Å–º–µ—â–µ–Ω–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ NULL.
‚Ä¢	LEAD ‚Äî –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –¥–∞–Ω–Ω—ã–º –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ç—Ä–æ–∫. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ LAG –∏–º–µ–µ—Ç 3 –∞—Ä–≥—É–º–µ–Ω—Ç–∞.
‚Ä¢	FIRST_VALUE ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –æ–∫–Ω–µ. –í –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—Ç–æ–ª–±–µ—Ü, –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–µ—Ä–Ω—É—Ç—å.
‚Ä¢	LAST_VALUE ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –æ–∫–Ω–µ. –í –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—Ç–æ–ª–±–µ—Ü, –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–µ—Ä–Ω—É—Ç—å

    SELECT id,
        home_type,
        price,
        LAG(price) OVER(PARTITION BY home_type ORDER BY price) AS 'lag',
        LAG(price, 2) OVER(PARTITION BY home_type ORDER BY price) AS 'lag_2',
        LEAD(price) OVER(PARTITION BY home_type ORDER BY price) AS 'lead',
        FIRST_VALUE(price) OVER(PARTITION BY home_type ORDER BY price) AS 'first_value',
        LAST_VALUE(price) OVER(PARTITION BY home_type ORDER BY price) AS 'last_value'
    FROM Rooms;

| id | home_type | price | lag | lag_2 | lead | first_value | last_value |
| ------------- | ------------- | ------------- | ------------- | ------------- | ------------- | ------------- | ------------- |
| 5 | Entire home/apt | 80 | <NULL> | <NULL> | 85 | 80 | 80 |
| 38 | Entire home/apt | 85 | 80 | <NULL> | 89 | 80 | 85 |
| 4 | Entire home/apt | 89 | 85 | 80 | 99 | 80 | 89 |

## #4 –¢—Ä–∞–Ω–∑–∞—Ü–∏–∏

–ï—Å–ª–∏ –±—ã —Å–µ—Ä–≤–µ—Ä—ã –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –±–µ–∑–æ—Ç–∫–∞–∑–Ω–æ —Ä–∞–±–æ—Ç–∞–ª–∏ –≤—Å–µ 100% –≤—Ä–µ–º–µ–Ω–∏, –µ—Å–ª–∏ –±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤—Å–µ–≥–¥–∞ –ø–æ–∑–≤–æ–ª—è–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞–º –∑–∞–≤–µ—Ä—à–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –µ—Å–ª–∏ –±—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤—Å–µ–≥–¥–∞ –∑–∞–≤–µ—Ä—à–∞–ª–∏—Å—å –±–µ–∑ —Ñ–∞—Ç–∞–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫, –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—â–∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, –Ω–µ –±—ã–ª–æ –±—ã –Ω–∏—á–µ–≥–æ, —á—Ç–æ —Å–ª–µ–¥–æ–≤–∞–ª–æ –±—ã–ª–æ –±—ã –æ–±—Å—É–∂–¥–∞—Ç—å –æ–± –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –¥–æ—Å—Ç—É–ø–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

–û–¥–Ω–∞–∫–æ —Ç–∞–∫–∞—è –∏–¥–µ–∞–ª—å–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è –Ω–µ—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞, –∏ –ø–æ—ç—Ç–æ–º—É –º—ã –¥–æ–ª–∂–Ω—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º—ã, –ø–æ–∑–≤–æ–ª—è—é—â–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ä–∞–±–æ—Ç–∞—Ç—å —Å –æ–¥–Ω–∏–º–∏ –∏ —Ç–µ–º–∏ –∂–µ –¥–∞–Ω–Ω—ã–º–∏. –û–¥–Ω–∏–º –∏–∑ –∫–ª—é—á–µ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ —Ä–µ—à–µ–Ω–∏–∏ —ç—Ç–æ–π –∑–∞–¥–∞—á–∏ —è–≤–ª—è–µ—Ç—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è.

–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è ‚Äî —ç—Ç–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∫–∞–∫ –µ–¥–∏–Ω–æ–µ —Ü–µ–ª–æ–µ.

–í –¥–∞–Ω–Ω–æ–º –±–ª–æ–∫–µ –º—ã –æ–±—Å—É–¥–∏–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –æ–±—ä–µ–¥–∏–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ SQL-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –≤ –æ–¥–Ω—É –≥—Ä—É–ø–ø—É, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—è, —á—Ç–æ –ª–∏–±–æ –≤—Å–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—Ç—Å—è —É—Å–ø–µ—à–Ω–æ, –ª–∏–±–æ –Ω–∏ –æ–¥–Ω–∞ –∏–∑ –Ω–∏—Ö –Ω–µ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞.

### #4.1 –ë–ª–æ–∫–∏—Ä–æ–≤–∞–∫–∞ –≤ –°–£–ë–î

–°–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–¥–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏–∑–≤–ª–µ–∫–∞—Ç—å –∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ. –û–¥–Ω–∞–∫–æ –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –º–∏—Ä–µ —Ç—ã—Å—è—á–∏ –ª—é–¥–µ–π –º–æ–≥—É—Ç –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –æ—Å—É—â–µ—Å—Ç–≤–ª—è—é—Ç —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, —Ç–æ —Ç–∞–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –æ—Å–æ–±–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –ù–æ –µ—Å–ª–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –¥–æ–±–∞–≤–ª—è—é—Ç –∏/–∏–ª–∏ –∏–∑–º–µ–Ω—è—é—Ç –¥–∞–Ω–Ω—ã–µ, —Ç–æ —Å–µ—Ä–≤–µ—Ä—É –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è —Ä–µ—à–∞—Ç—å –Ω–∞–º–Ω–æ–≥–æ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏.

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, –≤—ã –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á—ë—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–≤–æ–¥–∏—Ç –∏—Ç–æ–≥–∏ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –ø—Ä–æ–¥–∞–∂ –º–∞–≥–∞–∑–∏–Ω–∞ –∑–∞ –Ω–µ–¥–µ–ª—é. –í —Ç–æ –∂–µ –≤—Ä–µ–º—è, –∫–æ–≥–¥–∞ –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ –Ω–∞–¥ –æ—Ç—á—ë—Ç–æ–º, –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç —Å–ª–µ–¥—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:
‚Ä¢	–ö–ª–∏–µ–Ω—Ç –ø–æ–∫—É–ø–∞–µ—Ç —Ç–æ–≤–∞—Ä
‚Ä¢	–î—Ä—É–≥–æ–π –∫–ª–∏–µ–Ω—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–≤–∞—Ä, –∫–æ—Ç–æ—Ä—ã–π –æ–∫–∞–∑–∞–ª—Å—è –±—Ä–∞–∫–æ–≤–∞–Ω–Ω—ã–º, –∏ –ø–æ–ª—É—á–∞–µ—Ç –≤–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤
‚Ä¢	–ú–∞–≥–∞–∑–∏–Ω –ø–æ–ª—É—á–∞–µ—Ç –Ω–æ–≤—É—é –ø–∞—Ä—Ç–∏—é —Ç–æ–≤–∞—Ä–æ–≤

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤–æ –≤—Ä–µ–º—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∞—à–µ–≥–æ –æ—Ç—á—ë—Ç–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑–º–µ–Ω—è—é—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –¢–∞–∫ –∫–∞–∫–∏–µ —á–∏—Å–ª–∞ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –≤ –æ—Ç—á—ë—Ç–µ? üßê
–û—Ç–≤–µ—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫ –≤–∞—à —Å–µ—Ä–≤–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É.

**–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞**

–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ ‚Äî —ç—Ç–æ –º–µ—Ç–æ–¥ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.

–°–µ—Ä–≤–µ—Ä—ã –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏, —á—Ç–æ–±—ã —É–ø—Ä–∞–≤–ª—è—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º –¥–æ—Å—Ç—É–ø–æ–º –∫ –¥–∞–Ω–Ω—ã–º, —á—Ç–æ–±—ã –ø–æ–∫–∞ –æ–¥–Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –¥–∞–Ω–Ω—ã–º–∏, –¥—Ä—É–≥–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–µ –º–æ–≥–ª–∏ –∏—Ö –∏–∑–º–µ–Ω—è—Ç—å.

–ö–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ –≤ –±–∞–∑–µ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è, –¥—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç—è—Ç –∏–∑–º–µ–Ω–∏—Ç—å –∏–ª–∏ –ø—Ä–æ—á–∏—Ç–∞—Ç—å —ç—Ç–∏ –∂–µ –¥–∞–Ω–Ω—ã–µ, –¥–æ–ª–∂–Ω—ã –ø–æ–¥–æ–∂–¥–∞—Ç—å, –ø–æ–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–µ –±—É–¥–µ—Ç —Å–Ω—è—Ç–∞.

*–ì—Ä–∞–Ω—É–ª—è—Ä–Ω–æ—Å—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫*

–°—É—â–µ—Å—Ç–≤—É–µ—Ç —Ä—è–¥ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è, –∫–∞–∫ –∏–º–µ–Ω–Ω–æ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Å—É—Ä—Å. –°–µ—Ä–≤–µ—Ä –º–æ–∂–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –Ω–∞ –æ–¥–Ω–æ–º –∏–∑ —Ç—Ä—ë—Ö —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π, –∏–ª–∏ –≥—Ä–∞–Ω—É–ª—è—Ä–Ω–æ—Å—Ç–µ–π.
‚Ä¢	–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ç–∞–±–ª–∏—Ü
–ù–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ.
‚Ä¢	–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
–ù–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏–∑–º–µ–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ ‚Äî —ç—Ç–æ —Å–µ–≥–º–µ–Ω—Ç –ø–∞–º—è—Ç–∏, –æ–±—ã—á–Ω–æ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç 2 –¥–æ 16 –ö–±–∞–π—Ç) —Ç–∞–±–ª–∏—Ü—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
‚Ä¢	–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å—Ç—Ä–æ–∫
–ù–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å –æ–¥–Ω—É –∏ —Ç—É –∂–µ —Å—Ç—Ä–æ–∫—É –≤ —Ç–∞–±–ª–∏—Ü–µ.

–≠—Ç–∏ –ø–æ–¥—Ö–æ–¥—ã –∏–º–µ—é—Ç —Å–≤–æ–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤—Å–µ–π —Ç–∞–±–ª–∏—Ü—ã —Ç—Ä–µ–±—É–µ—Ç –Ω–µ–±–æ–ª—å—à–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –Ω–æ –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ —á–∏—Å–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –¥–æ–ª–≥–∏–º –æ–∂–∏–¥–∞–Ω–∏—è–º. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å—Ç—Ä–æ–∫ —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ–≥–æ –æ–±—ä—ë–º–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π, –Ω–æ –∑–∞—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏–∑–º–µ–Ω—è—Ç—å –æ–¥–Ω—É –∏ —Ç—É –∂–µ —Ç–∞–±–ª–∏—Ü—É, –µ—Å–ª–∏ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å —Ä–∞–∑–Ω—ã–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏.

MySQL –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É —Ç–∞–±–ª–∏—Ü, —Å—Ç—Ä–∞–Ω–∏—Ü –∏–ª–∏ —Å—Ç—Ä–æ–∫ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∞—à–µ–≥–æ –≤—ã–±–æ—Ä–∞ –º–µ—Ö–∞–Ω–∏–∑–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ MySQL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ö–∞–Ω–∏–∑–º —Ö—Ä–∞–Ω–µ–Ω–∏—è InnoDB, –∫–æ—Ç–æ—Ä—ã–π –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É —Å—Ç—Ä–æ–∫.

### #4.2 –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞—Ü–∏–π

–ï—Å–ª–∏ –≤—ã –ø–æ–ø—ã—Ç–∞–µ—Ç–µ—Å—å –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ 1000 –¥–æ–ª–ª–∞—Ä–æ–≤ —Å –≤–∞—à–µ–≥–æ —Å–±–µ—Ä–µ–≥–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Å—á—ë—Ç–∞ –Ω–∞ —Ç–µ–∫—É—â–∏–π –∏ –≤–¥—Ä—É–≥ –æ–±–Ω–∞—Ä—É–∂–∏—Ç–µ, —á—Ç–æ –¥–µ–Ω—å–≥–∏ –±—ã–ª–∏ —Å–ø–∏—Å–∞–Ω—ã, –Ω–æ –Ω–µ –∑–∞—á–∏—Å–ª–µ–Ω—ã –Ω–∞ —Ç–µ–∫—É—â–∏–π —Å—á—ë—Ç, –≤—ã, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —Ä–∞—Å—Å—Ç—Ä–æ–∏—Ç–µ—Å—å. üòø

–î–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç —Ç–∞–∫–æ–≥–æ —Ä–æ–¥–∞ –æ—à–∏–±–æ–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∞, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—â–∞—è –≤–∞—à –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–µ—Ä–µ–≤–æ–¥ –¥–µ–Ω–µ–≥, —Å–Ω–∞—á–∞–ª–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é, –∑–∞—Ç–µ–º –∑–∞–ø—É—Å–∫–∞–µ—Ç SQL-–∑–∞–ø—Ä–æ—Å—ã, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ –¥–µ–Ω–µ–≥ —Å –æ–¥–Ω–æ–≥–æ —Å—á—ë—Ç–∞ –Ω–∞ –¥—Ä—É–≥–æ–π, –∏, –µ—Å–ª–∏ –≤—Å–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ, –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é, –≤—ã–ø–æ–ª–Ω–∏–≤ –∫–æ–º–∞–Ω–¥—É COMMIT ‚Äî —Ñ–∏–∫—Å–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

–û–¥–Ω–∞–∫–æ, –µ—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –∫–∞–∫–∏–µ-–ª–∏–±–æ –ø—Ä–æ–±–ª–µ–º—ã, –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ ROLLBACK, –∫–æ—Ç–æ—Ä–∞—è —É–∫–∞–∑—ã–≤–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä—É –æ—Ç–º–µ–Ω–∏—Ç—å –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è, —Å–æ–≤–µ—Ä—à—ë–Ω–Ω—ã–µ —Å –Ω–∞—á–∞–ª–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.
–ü—Ä–æ—Ü–µ—Å—Å –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

    -- –ù–∞—á–∞–ª–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
    START TRANSACTION;

    -- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞ —É –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
    SELECT @balance := user_balance FROM accounts WHERE user_id = 1;

    -- –ï—Å–ª–∏ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, –æ—Ç–º–µ–Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
    IF @balance < 1000 THEN
    ROLLBACK;
    END IF;

    -- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—è
    SELECT @exists := COUNT(*) FROM accounts WHERE user_id = 2;
    IF @exists = 0 THEN
    ROLLBACK;
    END IF;

    -- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ —Å—á–µ—Ç–æ–≤, –µ—Å–ª–∏ –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã
    UPDATE accounts SET user_balance = user_balance - 1000 WHERE user_id = 1;
    UPDATE accounts SET user_balance = user_balance + 1000 WHERE user_id = 2;

    -- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
    COMMIT;

–° –ø–æ–º–æ—â—å—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç—å –≤–∞—à–∏—Ö 1000 –¥–æ–ª–ª–∞—Ä–æ–≤, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—è, —á—Ç–æ –æ–Ω–∏ –ª–∏–±–æ –æ—Å—Ç–∞–Ω—É—Ç—Å—è –Ω–∞ –∏—Å—Ö–æ–¥–Ω–æ–º —Å—á—ë—Ç–µ, –ª–∏–±–æ –±—É–¥—É—Ç –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ –¥—Ä—É–≥–æ–π —Å—á—ë—Ç, –∏—Å–∫–ª—é—á–∞—è —Ä–∏—Å–∫ –∏—Ö —É—Ç—Ä–∞—Ç—ã.

**–ó–∞–ø—É—Å–∫ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**

–ö–∞–∂–¥–∞—è —è–≤–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –≤ MySQL –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ START TRANSACTION.

–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∂–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤–æ–∑–º–æ–∂–Ω–æ:
‚Ä¢	—Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã COMMIT, –∫–æ—Ç–æ—Ä–∞—è –¥–∞—ë—Ç —É–∫–∞–∑–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä—É –ø–æ–º–µ—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–∞–∫ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –∏ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã (—Ç.–µ. –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å—Ç—Ä–æ–∫), –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–≤—à–∏–µ—Å—è –≤–æ –≤—Ä–µ–º—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏;
‚Ä¢	—Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã ROLLBACK, –∫–æ—Ç–æ—Ä–∞—è —Ç—Ä–µ–±—É–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –≤–µ—Ä–Ω—É—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–æ –Ω–∞—á–∞–ª–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ—Ç–∫–∞—Ç–∞ —Ç–∞–∫–∂–µ –ª—é–±—ã–µ —Ä–µ—Å—É—Ä—Å—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π, –æ—Å–≤–æ–±–æ–∂–¥–∞—é—Ç—Å—è.

–ü–æ–º–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥ COMMIT –∏ ROLLBACK, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤–Ω–µ—à–Ω–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –≤—ã–∫–ª—é—á–∞–µ—Ç—Å—è, –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –≤–∞—à–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω–µ–Ω–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞.

**–¢–æ—á–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**

–í –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö –≤–∞–º –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ—Ç–∫–∞—Ç –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –Ω–µ –æ—Ç–º–µ–Ω—è—è –≤—Å—é –ø—Ä–æ–¥–µ–ª–∞–Ω–Ω—É—é —Ä–∞–±–æ—Ç—É. –î–ª—è —ç—Ç–æ–≥–æ –≤—ã –º–æ–∂–µ—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–¥–Ω—É –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ—á–µ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ —Ä–∞–º–∫–∞—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ç–æ—á–∫–µ –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –∞ –Ω–µ –∫ –µ—ë –Ω–∞—á–∞–ª—É.

–ö–∞–∂–¥–æ–π —Ç–æ—á–∫–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–∏—Å–≤–æ–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è, —á—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ä–∞–∑–Ω—ã—Ö —Ç–æ—á–µ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è. –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ—á–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º my_savepoint –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É:

    SAVEPOINT my_savepoint;

–î–ª—è –æ—Ç–∫–∞—Ç–∞ –∫ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —Ç–æ—á–∫–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ—Å—Ç–æ –≤–≤–æ–¥–∏—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ ROLLBACK, –∑–∞ –∫–æ—Ç–æ—Ä–æ–π —Å–ª–µ–¥—É—é—Ç –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ TO SAVEPOINT –∏ –∏–º—è —Ç–æ—á–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä:

    START TRANSACTION;

    -- –°–æ–∑–¥–∞–µ–º —Ç–æ—á–∫—É —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –±–∞–ª–∞–Ω—Å–∞ –ø–µ—Ä–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    SAVEPOINT before_updating_user_1;
    UPDATE accounts SET balance = balance + 100 WHERE user_id = 1;

    -- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏—è –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    -- –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏–∫—É –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª

    -- –ó–¥–µ—Å—å –º—ã –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º, —á—Ç–æ —É—Å–ª–æ–≤–∏–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏–ª–æ—Å—å, –∏ –Ω–∞–º –Ω—É–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
    ROLLBACK TO SAVEPOINT before_updating_user_1;

    -- –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    UPDATE accounts SET balance = balance + 200 WHERE user_id = 2;

    -- –ó–∞–≤–µ—Ä—à–∞–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
    COMMIT;

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —ç—Ç–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –±–∞–ª–∞–Ω—Å –ø–µ—Ä–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–∑-–∑–∞ –æ—Ç–∫–∞—Ç–∞ –∫ —Ç–æ—á–∫–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, –∞ –±–∞–ª–∞–Ω—Å –≤—Ç–æ—Ä–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–≤–µ–ª–∏—á–∏—Ç—Å—è –Ω–∞ 200. –≠—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –º–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å –≤—ã—Å–æ–∫–∏–º —É—Ä–æ–≤–Ω–µ–º –∫–æ–Ω—Ç—Ä–æ–ª—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ —Ç–æ—á–µ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è.

–ö–æ–≥–¥–∞ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Ç–æ—á–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, –ø–æ–º–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –º–æ–º–µ–Ω—Ç—ã:
‚Ä¢	–Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ, –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–æ—á–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∏—á–µ–≥–æ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è. –ß—Ç–æ–±—ã –≤–∞—à–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ä–∞–º–∫–∞—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å—Ç–∞–ª–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É COMMIT;
‚Ä¢	–ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –æ—Ç–∫–∞—Ç–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ç–æ—á–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, –≤—Å–µ —Ä–∞–Ω–µ–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ç–æ—á–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –±—É–¥—É—Ç –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω—ã, –∏ –±—É–¥–µ—Ç –ø—Ä–æ–∏–∑–≤–µ–¥—ë–Ω –æ—Ç–∫–∞—Ç –≤—Å–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.
